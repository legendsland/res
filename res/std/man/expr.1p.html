<!DOCTYPE html><html><!-- This is an automatically generated file.  Do not edit.
   et
 --><head>
<meta name="dc.identifier" content="res/0567b03e01015364ef402a994f1e9e377531286b">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>EXPR(1P)</title>
<link id="res-style" rel="stylesheet" href="/res/dist/res/style.css" type="text/css">
</head>
<body>
<div id="book-container">
<table class="head">
  <tbody><tr>
    <td class="head-ltitle">EXPR(1P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">EXPR(1P)</td>
  </tr>
</tbody></table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="PROLOG"><a class="permalink" href="#PROLOG">PROLOG</a></h1>
<p class="Pp">This manual page is part of the POSIX Programmer's Manual. The
    Linux implementation of this interface may differ (consult the corresponding
    Linux manual page for details of Linux behavior), or the interface may not
    be implemented on Linux.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">expr — evaluate arguments as an expression</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>expr <i>operand</i>...</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>expr</i> utility shall evaluate an expression and write the
    result to standard output.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPERANDS"><a class="permalink" href="#OPERANDS">OPERANDS</a></h1>
<p class="Pp">The single expression evaluated by <i>expr</i> shall be formed
    from the <i>operand</i> operands, as described in the EXTENDED DESCRIPTION
    section. The application shall ensure that each of the expression operator
    symbols:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>(  )  |  &amp;  =  &gt;  &gt;=  &lt;  &lt;=  !=  +  -  *  /  %  :</pre>
</div>
<p class="Pp">and the symbols <i>integer</i> and <i>string</i> in the table are
    provided as separate arguments to <i>expr</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STDIN"><a class="permalink" href="#STDIN">STDIN</a></h1>
<p class="Pp">Not used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INPUT_FILES"><a class="permalink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<p class="Pp">The following environment variables shall affect the execution of
    <i>expr</i>:</p>
<dl class="Bl-tag">
  <dt id="LANG"><a class="permalink" href="#LANG"><i>LANG</i></a></dt>
  <dd>Provide a default value for the internationalization variables that are
      unset or null. (See the Base Definitions volume of POSIX.1‐2017,
      <i>Section 8.2</i>, <i>Internationalization Variables</i> for the
      precedence of internationalization variables used to determine the values
      of locale categories.)</dd>
  <dt id="LC_ALL"><a class="permalink" href="#LC_ALL"><i>LC_ALL</i></a></dt>
  <dd>If set to a non-empty string value, override the values of all the other
      internationalization variables.</dd>
  <dt id="LC_COLLATE"><a class="permalink" href="#LC_COLLATE"><i>LC_COLLATE</i></a></dt>
  <dd>
    <br>
    Determine the locale for the behavior of ranges, equivalence classes, and
      multi-character collating elements within regular expressions and by the
      string comparison operators.</dd>
  <dt id="LC_CTYPE"><a class="permalink" href="#LC_CTYPE"><i>LC_CTYPE</i></a></dt>
  <dd>Determine the locale for the interpretation of sequences of bytes of text
      data as characters (for example, single-byte as opposed to multi-byte
      characters in arguments) and the behavior of character classes within
      regular expressions.</dd>
  <dt id="LC_MESSAGES"><a class="permalink" href="#LC_MESSAGES"><i>LC_MESSAGES</i></a></dt>
  <dd>
    <br>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error.</dd>
  <dt id="NLSPATH"><a class="permalink" href="#NLSPATH"><i>NLSPATH</i></a></dt>
  <dd>Determine the location of message catalogs for the processing of
      <i>LC_MESSAGES</i>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ASYNCHRONOUS_EVENTS"><a class="permalink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
<p class="Pp">Default.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STDOUT"><a class="permalink" href="#STDOUT">STDOUT</a></h1>
<p class="Pp">The <i>expr</i> utility shall evaluate the expression and write
    the result, followed by a &lt;newline&gt;, to standard output.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STDERR"><a class="permalink" href="#STDERR">STDERR</a></h1>
<p class="Pp">The standard error shall be used only for diagnostic messages.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OUTPUT_FILES"><a class="permalink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTENDED_DESCRIPTION"><a class="permalink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
<p class="Pp">The formation of the expression to be evaluated is shown in the
    following table. The symbols <i>expr</i>, <i>expr1</i>, and <i>expr2</i>
    represent expressions formed from <i>integer</i> and <i>string</i> symbols
    and the expression operator symbols (all separate arguments) by recursive
    application of the constructs described in the table. The expressions are
    listed in order of decreasing precedence, with equal-precedence operators
    grouped between horizontal lines. All of the operators shall be
    left-associative.</p>
<table class="tbl" style="border-style: solid;">
  <tbody><tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;"><b>Expression</b></td>
    <td style="text-align: center;"><b>Description</b></td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>integer</i></td>
    <td>An argument consisting only of an (optional) unary minus followed by
      digits.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>string</i></td>
    <td>A string argument; see below.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;">(&nbsp;<i>expr</i>&nbsp;)</td>
    <td>Grouping symbols. Any expression can be placed within parentheses.
      Parentheses can be nested to a depth of {EXPR_NEST_MAX}.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;:&nbsp;<i>expr2</i></td>
    <td>Matching expression; see below.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;*&nbsp;<i>expr2</i></td>
    <td>Multiplication of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;/&nbsp;<i>expr2</i></td>
    <td>Integer division of decimal integer-valued arguments, producing an
      integer result.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;%&nbsp;<i>expr2</i></td>
    <td>Remainder of integer division of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;+&nbsp;<i>expr2</i></td>
    <td>Addition of decimal integer-valued arguments.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;-&nbsp;<i>expr2</i></td>
    <td>Subtraction of decimal integer-valued arguments.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"></td>
    <td>Returns the result of a decimal integer comparison if both arguments are
      integers; otherwise, returns the result of a string comparison using the
      locale-specific collation sequence. The result of each comparison is 1 if
      the specified relationship is true, or 0 if the relationship is
      false.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;=&nbsp;<i>expr2</i></td>
    <td>Equal.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;&gt;&nbsp;<i>expr2</i></td>
    <td>Greater than.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;&gt;=&nbsp;<i>expr2</i></td>
    <td>Greater than or equal.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;&lt;&nbsp;<i>expr2</i></td>
    <td>Less than.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;&lt;=&nbsp;<i>expr2</i></td>
    <td>Less than or equal.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;!=&nbsp;<i>expr2</i></td>
    <td>Not equal.</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;&amp;&nbsp;<i>expr2</i></td>
    <td>Returns the evaluation of expr1 if neither expression evaluates to null
      or zero; otherwise, returns zero.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>expr1</i>&nbsp;|&nbsp;<i>expr2</i></td>
    <td>Returns the evaluation of expr1 if it is neither null nor zero;
      otherwise, returns the evaluation of expr2 if it is not null; otherwise,
      zero.</td>
  </tr>
</tbody></table>
<section class="Ss">
<h2 class="Ss" id="Matching_Expression"><a class="permalink" href="#Matching_Expression">Matching
  Expression</a></h2>
<p class="Pp">The <b>':'</b> matching operator shall compare the string
    resulting from the evaluation of <i>expr1</i> with the regular expression
    pattern resulting from the evaluation of <i>expr2</i>. Regular expression
    syntax shall be that defined in the Base Definitions volume of
    POSIX.1‐2017, <i>Section 9.3</i>, <i>Basic Regular Expressions</i>,
    except that all patterns are anchored to the beginning of the string (that
    is, only sequences starting at the first character of a string are matched
    by the regular expression) and, therefore, it is unspecified whether
    <b>'^'</b> is a special character in that context. Usually, the matching
    operator shall return a string representing the number of characters matched
    (<b>'0'</b> on failure). Alternatively, if the pattern contains at least one
    regular expression subexpression <b>"[\(...\)]"</b>, the string
    matched by the back-reference expression <b>"\1"</b> shall be
    returned. If the back-reference expression <b>"\1"</b> does not
    match, then the null string shall be returned.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Identification_as_Integer_or_String"><a class="permalink" href="#Identification_as_Integer_or_String">Identification
  as Integer or String</a></h2>
<p class="Pp">An argument or the value of a subexpression that consists only of
    an optional unary minus followed by digits is a candidate for treatment as
    an integer if it is used as the left argument to the <i>|</i> operator or as
    either argument to any of the following operators: <i>&amp; = &gt; &gt;=
    &lt; &lt;= != + - * / %</i>. Otherwise, the argument or subexpression value
    shall be treated as a string.</p>
<p class="Pp">The use of string arguments <b>length</b>, <b>substr</b>,
    <b>index</b>, or <b>match</b> produces unspecified results.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">The following exit values shall be returned:</p>
<dl class="Bl-tag">
  <dt>&nbsp;0</dt>
  <dd>The <i>expression</i> evaluates to neither null nor zero.</dd>
  <dt>&nbsp;1</dt>
  <dd>The <i>expression</i> evaluates to null or zero.</dd>
  <dt>&nbsp;2</dt>
  <dd>Invalid <i>expression</i>.</dd>
  <dt>&gt;2</dt>
  <dd>An error occurred.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="permalink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
<p class="Pp">Default.</p>
<p class="Pp"><i>The following sections are informative.</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="APPLICATION_USAGE"><a class="permalink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
<p class="Pp">The <i>expr</i> utility has a rather difficult syntax:</p>
<dl class="Bl-tag">
  <dt> *</dt>
  <dd>Many of the operators are also shell control operators or reserved words,
      so they have to be escaped on the command line.</dd>
  <dt> *</dt>
  <dd>Each part of the expression is composed of separate arguments, so liberal
      usage of &lt;blank&gt; characters is required. For example:
    <table class="tbl" style="border-style: solid;">
      <tbody><tr style="border-bottom-style: solid;">
        <td style="text-align: center; border-right-style: solid;"><b>Invalid</b></td>
        <td style="text-align: center;"><b>Valid</b></td>
      </tr>
      <tr>
        <td style="border-right-style: solid;"><i>expr</i> 1+2</td>
        <td><i>expr</i> 1 + 2</td>
      </tr>
      <tr>
        <td style="border-right-style: solid;"><i>expr</i> "1 +
          2"</td>
        <td><i>expr</i> 1 + 2</td>
      </tr>
      <tr>
        <td style="border-right-style: solid;"><i>expr</i> 1 + (2 * 3)</td>
        <td><i>expr</i> 1 + \( 2 \* 3 \)</td>
      </tr>
    </tbody></table>
  </dd>
</dl>
<p class="Pp">In many cases, the arithmetic and string features provided as part
    of the shell command language are easier to use than their equivalents in
    <i>expr</i>. Newly written scripts should avoid <i>expr</i> in favor of the
    new features within the shell; see <i>Section 2.5</i>, <i>Parameters and
    Variables</i> and <i>Section 2.6.4</i>, <i>Arithmetic Expansion</i>.</p>
<p class="Pp">After argument processing by the shell, <i>expr</i> is not
    required to be able to tell the difference between an operator and an
    operand except by the value. If <b>"$a"</b> is <b>'='</b>, the
    command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr "$a" = '='</pre>
</div>
<p class="Pp">looks like:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr = = =</pre>
</div>
<p class="Pp">as the arguments are passed to <i>expr</i> (and they all may be
    taken as the <b>'='</b> operator). The following works reliably:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr "X$a" = X=</pre>
</div>
<p class="Pp">Also note that this volume of POSIX.1‐2017 permits
    implementations to extend utilities. The <i>expr</i> utility permits the
    integer arguments to be preceded with a unary minus. This means that an
    integer argument could look like an option. Therefore, the conforming
    application must employ the <b>"--"</b> construct of Guideline 10
    of the Base Definitions volume of POSIX.1‐2017, <i>Section 12.2</i>,
    <i>Utility Syntax Guidelines</i> to protect its operands if there is any
    chance the first operand might be a negative integer (or any string with a
    leading minus).</p>
<p class="Pp">For testing string equality the <i>test</i> utility is preferred
    over <i>expr</i>, as it is usually implemented as a shell built-in. However,
    the functionality is not quite the same because the <i>expr</i> <i>=</i> and
    <i>!=</i> operators check whether strings collate equally, whereas
    <i>test</i> checks whether they are identical. Therefore, they can produce
    different results in locales where the collation sequence does not have a
    total ordering of all characters (see the Base Definitions volume of
    POSIX.1‐2017, <i>Section 7.3.2</i>, <i>LC_COLLATE</i>).
  <br>
</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The following command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>a=$(expr "$a" + 1)</pre>
</div>
<p class="Pp">adds 1 to the variable <i>a</i>.</p>
<p class="Pp">The following command, for <b>"$a"</b> equal to either
    <b>/usr/abc/file</b> or just <b>file</b>:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr $a : '.*/\(.*\)' \| $a</pre>
</div>
<p class="Pp">returns the last segment of a pathname (that is, <b>file</b>).
    Applications should avoid the character <b>'/'</b> used alone as an
    argument; <i>expr</i> may interpret it as the division operator.</p>
<p class="Pp">The following command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr "//$a" : '.*/\(.*\)'</pre>
</div>
<p class="Pp">is a better representation of the previous example. The addition
    of the <b>"//"</b> characters eliminates any ambiguity about the
    division operator and simplifies the whole expression. Also note that
    pathnames may contain characters contained in the <i>IFS</i> variable and
    should be quoted to avoid having <b>"$a"</b> expand into multiple
    arguments.</p>
<p class="Pp">The following command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr "X$VAR" : '.*' - 1</pre>
</div>
<p class="Pp">returns the number of characters in <i>VAR</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RATIONALE"><a class="permalink" href="#RATIONALE">RATIONALE</a></h1>
<p class="Pp">In an early proposal, EREs were used in the matching expression
    syntax. This was changed to BREs to avoid breaking historical
  applications.</p>
<p class="Pp">The use of a leading &lt;circumflex&gt; in the BRE is unspecified
    because many historical implementations have treated it as a special
    character, despite their system documentation. For example:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>expr foo : ^foo     expr ^foo : ^foo</pre>
</div>
<p class="Pp">return 3 and 0, respectively, on those systems; their
    documentation would imply the reverse. Thus, the anchoring condition is left
    unspecified to avoid breaking historical scripts relying on this
    undocumented feature.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUTURE_DIRECTIONS"><a class="permalink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><i>Section 2.5</i>, <i>Parameters and Variables</i>, <i>Section
    2.6.4</i>, <i>Arithmetic Expansion</i></p>
<p class="Pp">The Base Definitions volume of POSIX.1‐2017, <i>Section
    7.3.2</i>, <i>LC_COLLATE</i>, <i>Chapter 8</i>, <i>Environment
    Variables</i>, <i>Section 9.3</i>, <i>Basic Regular Expressions</i>,
    <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Portions of this text are reprinted and reproduced in electronic
    form from IEEE Std 1003.1-2017, Standard for Information Technology --
    Portable Operating System Interface (POSIX), The Open Group Base
    Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of
    Electrical and Electronics Engineers, Inc and The Open Group. In the event
    of any discrepancy between this version and the original IEEE and The Open
    Group Standard, the original IEEE and The Open Group Standard is the referee
    document. The original Standard can be obtained online at
    http://www.opengroup.org/unix/online.html .</p>
<p class="Pp">Any typographical or formatting errors that appear in this page
    are most likely to have been introduced during the conversion of the source
    files to man page format. To report such errors, see
    https://www.kernel.org/doc/man-pages/reporting_bugs.html .</p>
</section>
</div>
<table class="foot">
  <tbody><tr>
    <td class="foot-date">2017</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</tbody></table>
</div>


<script id="res-script" src="/res/dist/res/main.js" type="text/javascript"></script>
</body></html>