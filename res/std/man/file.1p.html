<!DOCTYPE html><html><!-- This is an automatically generated file.  Do not edit.
   et
 --><head>
<meta name="dc.identifier" content="res/b8a1eb5e4dd5c1cd6ee1d4325a044439322ea82f">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>FILE(1P)</title>
<link id="res-style" rel="stylesheet" href="/res/dist/res/style.css" type="text/css">
</head>
<body>
<div id="book-container">
<table class="head">
  <tbody><tr>
    <td class="head-ltitle">FILE(1P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">FILE(1P)</td>
  </tr>
</tbody></table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="PROLOG"><a class="permalink" href="#PROLOG">PROLOG</a></h1>
<p class="Pp">This manual page is part of the POSIX Programmer's Manual. The
    Linux implementation of this interface may differ (consult the corresponding
    Linux manual page for details of Linux behavior), or the interface may not
    be implemented on Linux.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">file — determine file type</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>file <b>[</b>-dh<b>] [</b>-M <i>file</i><b>] [</b>-m <i>file</i><b>] </b><i>file</i>...</pre>
<pre>file -i <b>[</b>-h<b>] </b><i>file</i>...</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>file</i> utility shall perform a series of tests in
    sequence on each specified <i>file</i> in an attempt to classify it:</p>
<dl class="Bl-tag">
  <dt> 1.</dt>
  <dd>If <i>file</i> does not exist, cannot be read, or its file status could
      not be determined, the output shall indicate that the file was processed,
      but that its type could not be determined.</dd>
  <dt> 2.</dt>
  <dd>If the file is not a regular file, its file type shall be identified. The
      file types directory, FIFO, socket, block special, and character special
      shall be identified as such. Other implementation-defined file types may
      also be identified. If <i>file</i> is a symbolic link, by default the link
      shall be resolved and <i>file</i> shall test the type of file referenced
      by the symbolic link. (See the <b>-h</b> and <b>-i</b> options
    below.)</dd>
  <dt> 3.</dt>
  <dd>If the length of <i>file</i> is zero, it shall be identified as an empty
      file.</dd>
  <dt> 4.</dt>
  <dd>The <i>file</i> utility shall examine an initial segment of <i>file</i>
      and shall make a guess at identifying its contents based on
      position-sensitive tests. (The answer is not guaranteed to be correct; see
      the <b>-d</b>, <b>-M</b>, and <b>-m</b> options below.)</dd>
  <dt> 5.</dt>
  <dd>The <i>file</i> utility shall examine <i>file</i> and make a guess at
      identifying its contents based on context-sensitive default system tests.
      (The answer is not guaranteed to be correct.)</dd>
  <dt> 6.</dt>
  <dd>The file shall be identified as a data file.</dd>
</dl>
<p class="Pp">If <i>file</i> does not exist, cannot be read, or its file status
    could not be determined, the output shall indicate that the file was
    processed, but that its type could not be determined.</p>
<p class="Pp">If <i>file</i> is a symbolic link, by default the link shall be
    resolved and <i>file</i> shall test the type of file referenced by the
    symbolic link.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">The <i>file</i> utility shall conform to the Base Definitions
    volume of POSIX.1‐2017, <i>Section 12.2</i>, <i>Utility Syntax
    Guidelines</i>, except that the order of the <b>-m</b>, <b>-d</b>, and
    <b>-M</b> options shall be significant.</p>
<p class="Pp">The following options shall be supported by the
  implementation:</p>
<dl class="Bl-tag">
  <dt id="d"><a class="permalink" href="#d"><b>-d</b></a></dt>
  <dd>Apply any position-sensitive default system tests and context-sensitive
      default system tests to the file. This is the default if no <b>-M</b> or
      <b>-m</b> option is specified.</dd>
  <dt id="h"><a class="permalink" href="#h"><b>-h</b></a></dt>
  <dd>When a symbolic link is encountered, identify the file as a symbolic link.
      If <b>-h</b> is not specified and <i>file</i> is a symbolic link that
      refers to a nonexistent file, <i>file</i> shall identify the file as a
      symbolic link, as if <b>-h</b> had been specified.</dd>
  <dt id="i"><a class="permalink" href="#i"><b>-i</b></a></dt>
  <dd>If a file is a regular file, do not attempt to classify the type of the
      file further, but identify the file as specified in the STDOUT
    section.</dd>
  <dt id="M"><a class="permalink" href="#M"><b>-M&nbsp;</b><i>file</i></a></dt>
  <dd>Specify the name of a file containing position-sensitive tests that shall
      be applied to a file in order to classify it (see the EXTENDED
      DESCRIPTION). No position-sensitive default system tests nor
      context-sensitive default system tests shall be applied unless the
      <b>-d</b> option is also specified.</dd>
  <dt id="m"><a class="permalink" href="#m"><b>-m&nbsp;</b><i>file</i></a></dt>
  <dd>Specify the name of a file containing position-sensitive tests that shall
      be applied to a file in order to classify it (see the EXTENDED
      DESCRIPTION).</dd>
</dl>
<p class="Pp">If the <b>-m</b> option is specified without specifying the
    <b>-d</b> option or the <b>-M</b> option, position-sensitive default system
    tests shall be applied after the position-sensitive tests specified by the
    <b>-m</b> option. If the <b>-M</b> option is specified with the <b>-d</b>
    option, the <b>-m</b> option, or both, or the <b>-m</b> option is specified
    with the <b>-d</b> option, the concatenation of the position-sensitive tests
    specified by these options shall be applied in the order specified by the
    appearance of these options. If a <b>-M</b> or <b>-m</b> <i>file</i>
    option-argument is <b>-</b>, the results are unspecified.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPERANDS"><a class="permalink" href="#OPERANDS">OPERANDS</a></h1>
<p class="Pp">The following operand shall be supported:</p>
<dl class="Bl-tag">
  <dt id="file"><a class="permalink" href="#file"><i>file</i></a></dt>
  <dd>A pathname of a file to be tested.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="STDIN"><a class="permalink" href="#STDIN">STDIN</a></h1>
<p class="Pp">The standard input shall be used if a <i>file</i> operand is
    <b>'-'</b> and the implementation treats the <b>'-'</b> as meaning standard
    input. Otherwise, the standard input shall not be used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INPUT_FILES"><a class="permalink" href="#INPUT_FILES">INPUT
  FILES</a></h1>
<p class="Pp">The <i>file</i> can be any file type.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<p class="Pp">The following environment variables shall affect the execution of
    <i>file</i>:</p>
<dl class="Bl-tag">
  <dt id="LANG"><a class="permalink" href="#LANG"><i>LANG</i></a></dt>
  <dd>Provide a default value for the internationalization variables that are
      unset or null. (See the Base Definitions volume of POSIX.1‐2017,
      <i>Section 8.2</i>, <i>Internationalization Variables</i> for the
      precedence of internationalization variables used to determine the values
      of locale categories.)</dd>
  <dt id="LC_ALL"><a class="permalink" href="#LC_ALL"><i>LC_ALL</i></a></dt>
  <dd>If set to a non-empty string value, override the values of all the other
      internationalization variables.</dd>
  <dt id="LC_CTYPE"><a class="permalink" href="#LC_CTYPE"><i>LC_CTYPE</i></a></dt>
  <dd>Determine the locale for the interpretation of sequences of bytes of text
      data as characters (for example, single-byte as opposed to multi-byte
      characters in arguments and input files).</dd>
  <dt id="LC_MESSAGES"><a class="permalink" href="#LC_MESSAGES"><i>LC_MESSAGES</i></a></dt>
  <dd>
    <br>
    Determine the locale that should be used to affect the format and contents
      of diagnostic messages written to standard error and informative messages
      written to standard output.</dd>
  <dt id="NLSPATH"><a class="permalink" href="#NLSPATH"><i>NLSPATH</i></a></dt>
  <dd>Determine the location of message catalogs for the processing of
      <i>LC_MESSAGES</i>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ASYNCHRONOUS_EVENTS"><a class="permalink" href="#ASYNCHRONOUS_EVENTS">ASYNCHRONOUS
  EVENTS</a></h1>
<p class="Pp">Default.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STDOUT"><a class="permalink" href="#STDOUT">STDOUT</a></h1>
<p class="Pp">In the POSIX locale, the following format shall be used to
    identify each operand, <i>file</i> specified:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>"%s: %s\n", &lt;<i>file</i>&gt;, &lt;<i>type</i>&gt;</pre>
</div>
<p class="Pp">The values for &lt;<i>type</i>&gt; are unspecified, except that in
    the POSIX locale, if <i>file</i> is identified as one of the types listed in
    the following table, &lt;<i>type</i>&gt; shall contain (but is not limited
    to) the corresponding string, unless the file is identified by a
    position-sensitive test specified by a <b>-M</b> or <b>-m</b> option. Each
    &lt;space&gt; shown in the strings shall be exactly one &lt;space&gt;.</p>
<p class="Pp">
  <br>
  <b>Table 4-9: File Utility Output Strings</b>
  <br>
</p>
<table class="tbl" style="border-style: solid;">
  <tbody><tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;"><b>If
      </b><i>file</i><b> is:</b></td>
    <td style="text-align: center; border-right-style: solid;"><b>&lt;</b><i>type</i><b>&gt;
      shall contain the string:</b></td>
    <td style="text-align: center;"><b>Notes</b></td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Nonexistent</td>
    <td style="border-right-style: solid;">cannot open</td>
  </tr>
  <tr>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Block special</td>
    <td style="border-right-style: solid;">block special</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Character special</td>
    <td style="border-right-style: solid;">character special</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Directory</td>
    <td style="border-right-style: solid;">directory</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">FIFO</td>
    <td style="border-right-style: solid;">fifo</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Socket</td>
    <td style="border-right-style: solid;">socket</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Symbolic link</td>
    <td style="border-right-style: solid;">symbolic link to</td>
    <td>1</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Regular file</td>
    <td style="border-right-style: solid;">regular file</td>
    <td>1,2</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Empty regular file</td>
    <td style="border-right-style: solid;">empty</td>
    <td>3</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Regular file that cannot be read</td>
    <td style="border-right-style: solid;">cannot open</td>
    <td>3</td>
  </tr>
  <tr>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Executable binary</td>
    <td style="border-right-style: solid;">executable</td>
    <td>3,4,6</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;"><i>ar</i> archive library (see
      <i>ar</i>)</td>
    <td style="border-right-style: solid;">archive</td>
    <td>3,4,6</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Extended <i>cpio</i> format (see
      <i>pax</i>)</td>
    <td style="border-right-style: solid;">cpio archive</td>
    <td>3,4,6</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Extended <i>tar</i> format (see
      <b>ustar</b> in <i>pax</i>)</td>
    <td style="border-right-style: solid;">tar archive</td>
    <td>3,4,6</td>
  </tr>
  <tr>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Shell script</td>
    <td style="border-right-style: solid;">commands text</td>
    <td>3,5,6</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">C-language source</td>
    <td style="border-right-style: solid;">c program text</td>
    <td>3,5,6</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">FORTRAN source</td>
    <td style="border-right-style: solid;">fortran program text</td>
    <td>3,5,6</td>
  </tr>
  <tr>
  </tr>
  <tr>
    <td style="border-right-style: solid;">Regular file whose type cannot be
      determined</td>
    <td style="border-right-style: solid;">data</td>
    <td>3</td>
  </tr>
</tbody></table>
<dl class="Bl-tag">
  <dt id="Notes:"><a class="permalink" href="#Notes:"><b>Notes:</b></a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt> 1.</dt>
  <dd>This is a file type test.</dd>
  <dt> 2.</dt>
  <dd>This test is applied only if the <b>-i</b> option is specified.</dd>
  <dt> 3.</dt>
  <dd>This test is applied only if the <b>-i</b> option is not specified.</dd>
  <dt> 4.</dt>
  <dd>This is a position-sensitive default system test.</dd>
  <dt> 5.</dt>
  <dd>This is a context-sensitive default system test.</dd>
  <dt> 6.</dt>
  <dd>Position-sensitive default system tests and context-sensitive default
      system tests are not applied if the <b>-M</b> option is specified unless
      the <b>-d</b> option is also specified.</dd>
</dl>
</div>
<p class="Pp">In the POSIX locale, if <i>file</i> is identified as a symbolic
    link (see the <b>-h</b> option), the following alternative output format
    shall be used:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>"%s: %s %s\n", &lt;<i>file</i>&gt;, &lt;<i>type</i>&gt;, &lt;<i>contents of link</i>&gt;"</pre>
</div>
<p class="Pp">If the file named by the <i>file</i> operand does not exist,
    cannot be read, or the type of the file named by the <i>file</i> operand
    cannot be determined, this shall not be considered an error that affects the
    exit status.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="STDERR"><a class="permalink" href="#STDERR">STDERR</a></h1>
<p class="Pp">The standard error shall be used only for diagnostic messages.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OUTPUT_FILES"><a class="permalink" href="#OUTPUT_FILES">OUTPUT
  FILES</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTENDED_DESCRIPTION"><a class="permalink" href="#EXTENDED_DESCRIPTION">EXTENDED
  DESCRIPTION</a></h1>
<p class="Pp">A file specified as an option-argument to the <b>-m</b> or
    <b>-M</b> options shall contain one position-sensitive test per line, which
    shall be applied to the file. If the test succeeds, the message field of the
    line shall be printed and no further tests shall be applied, with the
    exception that tests on immediately following lines beginning with a single
    <b>'&gt;'</b> character shall be applied.</p>
<p class="Pp">Each line shall be composed of the following four
    &lt;tab&gt;-separated fields. (Implementations may allow any combination of
    one or more white-space characters other than &lt;newline&gt; to act as
    field separators.)</p>
<dl class="Bl-tag">
  <dt id="offset"><a class="permalink" href="#offset"><i>offset</i></a></dt>
  <dd>An unsigned number (optionally preceded by a single <b>'&gt;'</b>
      character) specifying the <i>offset</i>, in bytes, of the value in the
      file that is to be compared against the <i>value</i> field of the line. If
      the file is shorter than the specified offset, the test shall fail.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the <i>offset</i> begins with the character <b>'&gt;'</b>, the
    test contained in the line shall not be applied to the file unless the test
    on the last line for which the <i>offset</i> did not begin with a
    <b>'&gt;'</b> was successful. By default, the <i>offset</i> shall be
    interpreted as an unsigned decimal number. With a leading 0x or 0X, the
    <i>offset</i> shall be interpreted as a hexadecimal number; otherwise, with
    a leading 0, the <i>offset</i> shall be interpreted as an octal number.</p>
</div>
<dl class="Bl-tag">
  <dt id="type"><a class="permalink" href="#type"><i>type</i></a></dt>
  <dd>The type of the value in the file to be tested. The type shall consist of
      the type specification characters <b>d</b>, <b>s</b>, and <b>u</b>,
      specifying signed decimal, string, and unsigned decimal,
    respectively.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <i>type</i> string shall be interpreted as the bytes from the
    file starting at the specified <i>offset</i> and including the same number
    of bytes specified by the <i>value</i> field. If insufficient bytes remain
    in the file past the <i>offset</i> to match the <i>value</i> field, the test
    shall fail.</p>
<p class="Pp">The type specification characters <b>d</b> and <b>u</b> can be
    followed by an optional unsigned decimal integer that specifies the number
    of bytes represented by the type. The type specification characters <b>d</b>
    and <b>u</b> can be followed by an optional <b>C</b>, <b>S</b>, <b>I</b>, or
    <b>L</b>, indicating that the value is of type <b>char</b>, <b>short</b>,
    <b>int</b>, or <b>long</b>, respectively.</p>
<p class="Pp">The default number of bytes represented by the type specifiers
    <b>d</b>, <b>f</b>, and <b>u</b> shall correspond to their respective
    C-language types as follows. If the system claims conformance to the
    C-Language Development Utilities option, those specifiers shall correspond
    to the default sizes used in the <i>c99</i> utility. Otherwise, the default
    sizes shall be implementation-defined.</p>
<p class="Pp">For the type specifier characters <b>d</b> and <b>u</b>, the
    default number of bytes shall correspond to the size of a basic integer type
    of the implementation. For these specifier characters, the implementation
    shall support values of the optional number of bytes to be converted
    corresponding to the number of bytes in the C-language types <b>char</b>,
    <b>short</b>, <b>int</b>, or <b>long</b>. These numbers can also be
    specified by an application as the characters <b>C</b>, <b>S</b>, <b>I</b>,
    and <b>L</b>, respectively. The byte order used when interpreting numeric
    values is implementation-defined, but shall correspond to the order in which
    a constant of the corresponding type is stored in memory on the system.</p>
<p class="Pp">All type specifiers, except for <b>s</b>, can be followed by a
    mask specifier of the form &amp;<i>number</i>. The mask value shall be
    AND'ed with the value of the input file before the comparison with the
    <i>value</i> field of the line is made. By default, the mask shall be
    interpreted as an unsigned decimal number. With a leading 0x or 0X, the mask
    shall be interpreted as an unsigned hexadecimal number; otherwise, with a
    leading 0, the mask shall be interpreted as an unsigned octal number.</p>
<p class="Pp">The strings <b>byte</b>, <b>short</b>, <b>long</b>, and
    <b>string</b> shall also be supported as type fields, being interpreted as
    <b>dC</b>, <b>dS</b>, <b>dL</b>, and <b>s</b>, respectively.</p>
</div>
<dl class="Bl-tag">
  <dt id="value"><a class="permalink" href="#value"><i>value</i></a></dt>
  <dd>The <i>value</i> to be compared with the value from the file.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the specifier from the type field is <b>s</b> or <b>string</b>,
    then interpret the value as a string. Otherwise, interpret it as a number.
    If the value is a string, then the test shall succeed only when a string
    value exactly matches the bytes from the file.</p>
<p class="Pp">If the <i>value</i> is a string, it can contain the following
    sequences:</p>
<dl class="Bl-tag">
  <dt id="character"><a class="permalink" href="#character">\<i>character</i></a></dt>
  <dd>The &lt;backslash&gt;-escape sequences as specified in the Base
      Definitions volume of POSIX.1‐2017, <i>Table 5-1</i>, <i>Escape
      Sequences and Associated Actions</i> (<b>'\\'</b>, <b>'\a'</b>,
      <b>'\b'</b>, <b>'\f'</b>, <b>'\n'</b>, <b>'\r'</b>, <b>'\t'</b>,
      <b>'\v'</b>). In addition, the escape sequence <b>'\&nbsp;'</b> (the
      &lt;backslash&gt; character followed by a &lt;space&gt; character) shall
      be recognized to represent a &lt;space&gt; character. The results of using
      any other character, other than an octal digit, following the
      &lt;backslash&gt; are unspecified.</dd>
  <dt id="octal"><a class="permalink" href="#octal">\<i>octal</i></a></dt>
  <dd>Octal sequences that can be used to represent characters with specific
      coded values. An octal sequence shall consist of a &lt;backslash&gt;
      followed by the longest sequence of one, two, or three octal-digit
      characters (01234567).</dd>
</dl>
<p class="Pp">By default, any value that is not a string shall be interpreted as
    a signed decimal number. Any such value, with a leading 0x or 0X, shall be
    interpreted as an unsigned hexadecimal number; otherwise, with a leading
    zero, the value shall be interpreted as an unsigned octal number.</p>
<p class="Pp">If the value is not a string, it can be preceded by a character
    indicating the comparison to be performed. Permissible characters and the
    comparisons they specify are as follows:</p>
<dl class="Bl-tag">
  <dt>=</dt>
  <dd>The test shall succeed if the value from the file equals the <i>value</i>
      field.</dd>
  <dt>&lt;</dt>
  <dd>The test shall succeed if the value from the file is less than the
      <i>value</i> field.</dd>
  <dt>&gt;</dt>
  <dd>The test shall succeed if the value from the file is greater than the
      <i>value</i> field.</dd>
  <dt>&amp;</dt>
  <dd>The test shall succeed if all of the set bits in the <i>value</i> field
      are set in the value from the file.</dd>
  <dt>^</dt>
  <dd>The test shall succeed if at least one of the set bits in the <i>value</i>
      field is not set in the value from the file.</dd>
  <dt id="x"><a class="permalink" href="#x">x</a></dt>
  <dd>The test shall succeed if the file is large enough to contain a value of
      the type specified starting at the offset specified.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="message"><a class="permalink" href="#message"><i>message</i></a></dt>
  <dd>The <i>message</i> to be printed if the test succeeds. The <i>message</i>
      shall be interpreted using the notation for the <i>printf</i> formatting
      specification; see <i>printf</i>. If the <i>value</i> field was a string,
      then the value from the file shall be the argument for the <i>printf</i>
      formatting specification; otherwise, the value from the file shall be the
      argument.
    <br>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">The following exit values shall be returned:</p>
<dl class="Bl-tag">
  <dt>&nbsp;0</dt>
  <dd>Successful completion.</dd>
  <dt>&gt;0</dt>
  <dd>An error occurred.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSEQUENCES_OF_ERRORS"><a class="permalink" href="#CONSEQUENCES_OF_ERRORS">CONSEQUENCES
  OF ERRORS</a></h1>
<p class="Pp">Default.</p>
<p class="Pp"><i>The following sections are informative.</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="APPLICATION_USAGE"><a class="permalink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
<p class="Pp">The <i>file</i> utility can only be required to guess at many of
    the file types because only exhaustive testing can determine some types with
    certainty. For example, binary data on some implementations might match the
    initial segment of an executable or a <i>tar</i> archive.</p>
<p class="Pp">Note that the table indicates that the output contains the stated
    string. Systems may add text before or after the string. For executables, as
    an example, the machine architecture and various facts about how the file
    was link-edited may be included. Note also that on systems that recognize
    shell script files starting with <b>"#!"</b> as executable files,
    these may be identified as executable binary files rather than as shell
    scripts.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Determine whether an argument is a binary executable file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>file -- "$1" | grep -q ':.*executable' &amp;&amp;
<br>
    printf "%s is executable.\n$1"</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="RATIONALE"><a class="permalink" href="#RATIONALE">RATIONALE</a></h1>
<p class="Pp">The <b>-f</b> option was omitted because the same effect can (and
    should) be obtained using the <i>xargs</i> utility.</p>
<p class="Pp">Historical versions of the <i>file</i> utility attempt to identify
    the following types of files: symbolic link, directory, character special,
    block special, socket, <i>tar</i> archive, <i>cpio</i> archive, SCCS
    archive, archive library, empty, <i>compress</i> output, <i>pack</i> output,
    binary data, C source, FORTRAN source, assembler source,
    <i>nroff</i>/<i>troff</i>/<i>eqn</i>/<i>tbl</i> source <i>troff</i> output,
    shell script, C shell script, English text, ASCII text, various executables,
    APL workspace, compiled terminfo entries, and CURSES screen images. Only
    those types that are reasonably well specified in POSIX or are directly
    related to POSIX utilities are listed in the table.</p>
<p class="Pp">Historical systems have used a ``magic file'' named
    <b>/etc/magic</b> to help identify file types. Because it is generally
    useful for users and scripts to be able to identify special file types, the
    <b>-m</b> flag and a portable format for user-created magic files has been
    specified. No requirement is made that an implementation of <i>file</i> use
    this method of identifying files, only that users be permitted to add their
    own classifying tests.</p>
<p class="Pp">In addition, three options have been added to historical practice.
    The <b>-d</b> flag has been added to permit users to cause their tests to
    follow any default system tests. The <b>-i</b> flag has been added to permit
    users to test portably for regular files in shell scripts. The <b>-M</b>
    flag has been added to permit users to ignore any default system tests.</p>
<p class="Pp">The POSIX.1‐2008 description of default system tests and
    the interaction between the <b>-d</b>, <b>-M</b>, and <b>-m</b> options did
    not clearly indicate that there were two types of ``default system tests''.
    The ``position-sensitive tests'' determine file types by looking for certain
    string or binary values at specific offsets in the file being examined.
    These position-sensitive tests were implemented in historical systems using
    the magic file described above. Some of these tests are now built into the
    <i>file</i> utility itself on some implementations so the output can provide
    more detail than can be provided by magic files. For example, a magic file
    can easily identify a <b>core</b> file on most implementations, but cannot
    name the program file that dropped the core. A magic file could produce
    output such as:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>/home/dwc/core: ELF 32-bit MSB core file SPARC Version 1</pre>
</div>
<p class="Pp">but by building the test into the <i>file</i> utility, you could
    get output such as:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>/home/dwc/core: ELF 32-bit MSB core file SPARC Version 1, from 'testprog'</pre>
</div>
<p class="Pp">These extended built-in tests are still to be treated as
    position-sensitive default system tests even if they are not listed in
    <b>/etc/magic</b> or any other magic file.</p>
<p class="Pp">The context-sensitive default system tests were always built into
    the <i>file</i> utility. These tests looked for language constructs in text
    files trying to identify shell scripts, C, FORTRAN, and other computer
    language source files, and even plain text files. With the addition of the
    <b>-m</b> and <b>-M</b> options the distinction between position-sensitive
    and context-sensitive default system tests became important because the
    order of testing is important. The context-sensitive system default tests
    should never be applied before any position-sensitive tests even if the
    <b>-d</b> option is specified before a <b>-m</b> option or <b>-M</b> option
    due to the high probability that the context-sensitive system default tests
    will incorrectly identify arbitrary text files as text files before
    position-sensitive tests specified by the <b>-m</b> or <b>-M</b> option
    would be applied to give a more accurate identification.</p>
<p class="Pp">Leaving the meaning of <b>-M -</b> and <b>-m -</b> unspecified
    allows an existing prototype of these options to continue to work in a
    backwards-compatible manner. (In that implementation, <b>-M -</b> was
    roughly equivalent to <b>-d</b> in POSIX.1‐2008.)</p>
<p class="Pp">The historical <b>-c</b> option was omitted as not particularly
    useful to users or portable shell scripts. In addition, a reasonable
    implementation of the <i>file</i> utility would report any errors found each
    time the magic file is read.</p>
<p class="Pp">The historical format of the magic file was the same as that
    specified by the Rationale in the ISO&nbsp;POSIX‐2:1993 standard
    for the <i>offset</i>, <i>value</i>, and <i>message</i> fields; however, it
    used less precise type fields than the format specified by the current
    normative text. The new type field values are a superset of the historical
    ones.</p>
<p class="Pp">The following is an example magic file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>0  short     070707              cpio archive
0  short     0143561             Byte-swapped cpio archive
0  string    070707              ASCII cpio archive
0  long      0177555             Very old archive
0  short     0177545             Old archive
0  short     017437              Old packed data
0  string    \037\036            Packed data
0  string    \377\037            Compacted data
0  string    \037\235            Compressed data
&gt;2 byte&amp;0x80 &gt;0                  Block compressed
&gt;2 byte&amp;0x1f x                   %d bits
0  string    \032\001            Compiled Terminfo Entry
0  short     0433                Curses screen image
0  short     0434                Curses screen image
0  string    &lt;ar&gt;                System V Release 1 archive
0  string    !&lt;arch&gt;\n__.SYMDEF  Archive random library
0  string    !&lt;arch&gt;             Archive
0  string    ARF_BEGARF          PHIGS clear text archive
0  long      0x137A2950          Scalable OpenFont binary
0  long      0x137A2951          Encrypted scalable OpenFont binary</pre>
</div>
<p class="Pp">The use of a basic integer data type is intended to allow the
    implementation to choose a word size commonly used by applications on that
    architecture.</p>
<p class="Pp">Earlier versions of this standard allowed for implementations with
    bytes other than eight bits, but this has been modified in this version.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUTURE_DIRECTIONS"><a class="permalink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><i><i>ar</i></i>, <i><i>ls</i></i>, <i><i>pax</i></i>,
    <i><i>printf</i></i></p>
<p class="Pp">The Base Definitions volume of POSIX.1‐2017, <i>Table
    5-1</i>, <i>Escape Sequences and Associated Actions</i>, <i>Chapter 8</i>,
    <i>Environment Variables</i>, <i>Section 12.2</i>, <i>Utility Syntax
    Guidelines</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Portions of this text are reprinted and reproduced in electronic
    form from IEEE Std 1003.1-2017, Standard for Information Technology --
    Portable Operating System Interface (POSIX), The Open Group Base
    Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of
    Electrical and Electronics Engineers, Inc and The Open Group. In the event
    of any discrepancy between this version and the original IEEE and The Open
    Group Standard, the original IEEE and The Open Group Standard is the referee
    document. The original Standard can be obtained online at
    http://www.opengroup.org/unix/online.html .</p>
<p class="Pp">Any typographical or formatting errors that appear in this page
    are most likely to have been introduced during the conversion of the source
    files to man page format. To report such errors, see
    https://www.kernel.org/doc/man-pages/reporting_bugs.html .</p>
</section>
</div>
<table class="foot">
  <tbody><tr>
    <td class="foot-date">2017</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</tbody></table>
</div>


<script id="res-script" src="/res/dist/res/main.js" type="text/javascript"></script>
</body></html>