<!DOCTYPE html><html><!-- This is an automatically generated file.  Do not edit.
   et
 --><head>
<meta name="dc.identifier" content="res/5b4da978a85eb4a2816e669e78e33c607e492538">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>DIRFD(3P)</title>
<link id="res-style" rel="stylesheet" href="/res/dist/res/style.css" type="text/css">
</head>
<body>
<div id="book-container">
<table class="head">
  <tbody><tr>
    <td class="head-ltitle">DIRFD(3P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">DIRFD(3P)</td>
  </tr>
</tbody></table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="PROLOG"><a class="permalink" href="#PROLOG">PROLOG</a></h1>
<p class="Pp">This manual page is part of the POSIX Programmer's Manual. The
    Linux implementation of this interface may differ (consult the corresponding
    Linux manual page for details of Linux behavior), or the interface may not
    be implemented on Linux.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">dirfd — extract the file descriptor used by a DIR
  stream</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;dirent.h&gt;</pre>
<pre>int dirfd(DIR *<i>dirp</i>);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>dirfd</i>() function shall return a file descriptor
    referring to the same directory as the <i>dirp</i> argument. This file
    descriptor shall be closed by a call to <i>closedir</i>(). If any attempt is
    made to close the file descriptor, or to modify the state of the associated
    description, other than by means of <i>closedir</i>(), <i>readdir</i>(),
    <i>readdir_r</i>(), <i>rewinddir</i>(), or <i>seekdir</i>(), the behavior is
    undefined.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">Upon successful completion, the <i>dirfd</i>() function shall
    return an integer which contains a file descriptor for the stream pointed to
    by <i>dirp</i>. Otherwise, it shall return -1 and shall set <i>errno</i> to
    indicate the error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
<p class="Pp">The <i>dirfd</i>() function may fail if:</p>
<dl class="Bl-tag">
  <dt id="EINVAL"><a class="permalink" href="#EINVAL"><b>EINVAL</b></a></dt>
  <dd>The <i>dirp</i> argument does not refer to a valid directory stream.</dd>
</dl>
<p class="Pp"><i>The following sections are informative.</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="APPLICATION_USAGE"><a class="permalink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
<p class="Pp">The <i>dirfd</i>() function is intended to be a mechanism by which
    an application may obtain a file descriptor to use for the <i>fchdir</i>()
    function.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RATIONALE"><a class="permalink" href="#RATIONALE">RATIONALE</a></h1>
<p class="Pp">This interface was introduced because the Base Definitions volume
    of POSIX.1‐2017 does not make public the <b>DIR</b> data structure.
    Applications tend to use the <i>fchdir</i>() function on the file descriptor
    returned by this interface, and this has proven useful for security reasons;
    in particular, it is a better technique than others where directory names
    might change.</p>
<p class="Pp">The description uses the term ``a file descriptor'' rather than
    ``the file descriptor''. The implication intended is that an implementation
    that does not use an <i>fd</i> for <i>opendir</i>() could still
    <i>open</i>() the directory to implement the <i>dirfd</i>() function. Such a
    descriptor must be closed later during a call to <i>closedir</i>().</p>
<p class="Pp">If it is necessary to allocate an <i>fd</i> to be returned by
    <i>dirfd</i>(), it should be done at the time of a call to
  <i>opendir</i>().</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUTURE_DIRECTIONS"><a class="permalink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><i><i>closedir</i>()</i>, <i><i>fchdir</i>()</i>,
    <i><i>fdopendir</i>()</i>, <i><i>fileno</i>()</i>, <i><i>open</i>()</i>,
    <i><i>readdir</i>()</i></p>
<p class="Pp">The Base Definitions volume of POSIX.1‐2017,
    <i><b>&lt;dirent.h&gt;</b></i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Portions of this text are reprinted and reproduced in electronic
    form from IEEE Std 1003.1-2017, Standard for Information Technology --
    Portable Operating System Interface (POSIX), The Open Group Base
    Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of
    Electrical and Electronics Engineers, Inc and The Open Group. In the event
    of any discrepancy between this version and the original IEEE and The Open
    Group Standard, the original IEEE and The Open Group Standard is the referee
    document. The original Standard can be obtained online at
    http://www.opengroup.org/unix/online.html .</p>
<p class="Pp">Any typographical or formatting errors that appear in this page
    are most likely to have been introduced during the conversion of the source
    files to man page format. To report such errors, see
    https://www.kernel.org/doc/man-pages/reporting_bugs.html .</p>
</section>
</div>
<table class="foot">
  <tbody><tr>
    <td class="foot-date">2017</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</tbody></table>
</div>


<script id="res-script" src="/res/dist/res/main.js" type="text/javascript"></script>
</body></html>