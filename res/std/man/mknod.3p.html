<!DOCTYPE html><html><!-- This is an automatically generated file.  Do not edit.
   et
 --><head>
<meta name="dc.identifier" content="res/aea03a167c644ca3e7886238f16a6b5f14fb723c">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>MKNOD(3P)</title>
<link id="res-style" rel="stylesheet" href="/res/dist/res/style.css" type="text/css">
</head>
<body>
<div id="book-container">
<table class="head">
  <tbody><tr>
    <td class="head-ltitle">MKNOD(3P)</td>
    <td class="head-vol">POSIX Programmer's Manual</td>
    <td class="head-rtitle">MKNOD(3P)</td>
  </tr>
</tbody></table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="PROLOG"><a class="permalink" href="#PROLOG">PROLOG</a></h1>
<p class="Pp">This manual page is part of the POSIX Programmer's Manual. The
    Linux implementation of this interface may differ (consult the corresponding
    Linux manual page for details of Linux behavior), or the interface may not
    be implemented on Linux.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">mknod, mknodat — make directory, special file, or regular
    file</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>#include &lt;sys/stat.h&gt;</pre>
<pre>int mknod(const char *<i>path</i>, mode_t <i>mode</i>, dev_t <i>dev</i>);</pre>
<pre>#include &lt;fcntl.h&gt;</pre>
<pre>int mknodat(int <i>fd</i>, const char *<i>path</i>, mode_t <i>mode</i>, dev_t <i>dev</i>);</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <i>mknod</i>() function shall create a new file named by the
    pathname to which the argument <i>path</i> points.</p>
<p class="Pp">The file type for <i>path</i> is OR'ed into the <i>mode</i>
    argument, and the application shall select one of the following symbolic
    constants:</p>
<table class="tbl" style="border-style: solid;">
  <tbody><tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;"><b>Name</b></td>
    <td style="text-align: center;"><b>Description</b></td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IFIFO</td>
    <td>FIFO-special</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IFCHR</td>
    <td>Character-special (non-portable)</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IFDIR</td>
    <td>Directory (non-portable)</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IFBLK</td>
    <td>Block-special (non-portable)</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IFREG</td>
    <td>Regular (non-portable)</td>
  </tr>
</tbody></table>
<p class="Pp">The only portable use of <i>mknod</i>() is to create a
    FIFO-special file. If <i>mode</i> is not S_IFIFO or <i>dev</i> is not 0, the
    behavior of <i>mknod</i>() is unspecified.</p>
<p class="Pp">The permissions for the new file are OR'ed into the <i>mode</i>
    argument, and may be selected from any combination of the following symbolic
    constants:</p>
<table class="tbl" style="border-style: solid;">
  <tbody><tr style="border-bottom-style: solid;">
    <td style="text-align: center; border-right-style: solid;"><b>Name</b></td>
    <td style="text-align: center;"><b>Description</b></td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_ISUID</td>
    <td>Set user ID on execution.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_ISGID</td>
    <td>Set group ID on execution.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IRWXU</td>
    <td>Read, write, or execute (search) by owner.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IRUSR</td>
    <td>Read by owner.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IWUSR</td>
    <td>Write by owner.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IXUSR</td>
    <td>Execute (search) by owner.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IRWXG</td>
    <td>Read, write, or execute (search) by group.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IRGRP</td>
    <td>Read by group.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IWGRP</td>
    <td>Write by group.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IXGRP</td>
    <td>Execute (search) by group.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IRWXO</td>
    <td>Read, write, or execute (search) by others.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IROTH</td>
    <td>Read by others.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IWOTH</td>
    <td>Write by others.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_IXOTH</td>
    <td>Execute (search) by others.</td>
  </tr>
  <tr>
    <td style="border-right-style: solid;">S_ISVTX</td>
    <td>On directories, restricted deletion flag.</td>
  </tr>
</tbody></table>
<p class="Pp">The user ID of the file shall be initialized to the effective user
    ID of the process. The group ID of the file shall be initialized to either
    the effective group ID of the process or the group ID of the parent
    directory. Implementations shall provide a way to initialize the file's
    group ID to the group ID of the parent directory. Implementations may, but
    need not, provide an implementation-defined way to initialize the file's
    group ID to the effective group ID of the calling process. The owner, group,
    and other permission bits of <i>mode</i> shall be modified by the file mode
    creation mask of the process. The <i>mknod</i>() function shall clear each
    bit whose corresponding bit in the file mode creation mask of the process is
    set.</p>
<p class="Pp">If <i>path</i> names a symbolic link, <i>mknod</i>() shall fail
    and set <i>errno</i> to <b>[EEXIST]</b>.</p>
<p class="Pp">Upon successful completion, <i>mknod</i>() shall mark for update
    the last data access, last data modification, and last file status change
    timestamps of the file. Also, the last data modification and last file
    status change timestamps of the directory that contains the new entry shall
    be marked for update.</p>
<p class="Pp">Only a process with appropriate privileges may invoke
    <i>mknod</i>() for file types other than FIFO-special.</p>
<p class="Pp">The <i>mknodat</i>() function shall be equivalent to the
    <i>mknod</i>() function except in the case where <i>path</i> specifies a
    relative path. In this case the newly created directory, special file, or
    regular file is located relative to the directory associated with the file
    descriptor <i>fd</i> instead of the current working directory. If the access
    mode of the open file description associated with the file descriptor is not
    O_SEARCH, the function shall check whether directory searches are permitted
    using the current permissions of the directory underlying the file
    descriptor. If the access mode is O_SEARCH, the function shall not perform
    the check.</p>
<p class="Pp">If <i>mknodat</i>() is passed the special value AT_FDCWD in the
    <i>fd</i> parameter, the current working directory shall be used and the
    behavior shall be identical to a call to <i>mknod</i>().</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUE"><a class="permalink" href="#RETURN_VALUE">RETURN
  VALUE</a></h1>
<p class="Pp">Upon successful completion, these functions shall return 0.
    Otherwise, these functions shall return -1 and set <i>errno</i> to indicate
    the error. If -1 is returned, the new file shall not be created.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ERRORS"><a class="permalink" href="#ERRORS">ERRORS</a></h1>
<p class="Pp">These functions shall fail if:</p>
<dl class="Bl-tag">
  <dt id="EACCES"><a class="permalink" href="#EACCES"><b>EACCES</b></a></dt>
  <dd>A component of the path prefix denies search permission, or write
      permission is denied on the parent directory.</dd>
  <dt id="EEXIST"><a class="permalink" href="#EEXIST"><b>EEXIST</b></a></dt>
  <dd>The named file exists.</dd>
  <dt id="EINVAL"><a class="permalink" href="#EINVAL"><b>EINVAL</b></a></dt>
  <dd>An invalid argument exists.</dd>
  <dt id="EIO"><a class="permalink" href="#EIO"><b>EIO</b></a></dt>
  <dd>An I/O error occurred while accessing the file system.</dd>
  <dt id="ELOOP"><a class="permalink" href="#ELOOP"><b>ELOOP</b></a></dt>
  <dd>A loop exists in symbolic links encountered during resolution of the
      <i>path</i> argument.</dd>
  <dt id="ENAMETOOLONG"><a class="permalink" href="#ENAMETOOLONG"><b>ENAMETOOLONG</b></a></dt>
  <dd>
    <br>
    The length of a component of a pathname is longer than {NAME_MAX}.</dd>
  <dt id="ENOENT"><a class="permalink" href="#ENOENT"><b>ENOENT</b></a></dt>
  <dd>A component of the path prefix of <i>path</i> does not name an existing
      file or <i>path</i> is an empty string.</dd>
  <dt id="ENOENT~2"><a class="permalink" href="#ENOENT~2"><b>ENOENT</b> or
    <b>ENOTDIR</b></a></dt>
  <dd>
    <br>
    The <i>path</i> argument contains at least one non-&lt;slash&gt; character
      and ends with one or more trailing &lt;slash&gt; characters. If
      <i>path</i> without the trailing &lt;slash&gt; characters would name an
      existing file, an <b>[ENOENT]</b> error shall not occur.</dd>
  <dt id="ENOSPC"><a class="permalink" href="#ENOSPC"><b>ENOSPC</b></a></dt>
  <dd>The directory that would contain the new file cannot be extended or the
      file system is out of file allocation resources.</dd>
  <dt id="ENOTDIR"><a class="permalink" href="#ENOTDIR"><b>ENOTDIR</b></a></dt>
  <dd>A component of the path prefix names an existing file that is neither a
      directory nor a symbolic link to a directory.</dd>
  <dt id="EPERM"><a class="permalink" href="#EPERM"><b>EPERM</b></a></dt>
  <dd>The invoking process does not have appropriate privileges and the file
      type is not FIFO-special.</dd>
  <dt id="EROFS"><a class="permalink" href="#EROFS"><b>EROFS</b></a></dt>
  <dd>The directory in which the file is to be created is located on a read-only
      file system.
    <br>
  </dd>
</dl>
<p class="Pp">The <i>mknodat</i>() function shall fail if:</p>
<dl class="Bl-tag">
  <dt id="EACCES~2"><a class="permalink" href="#EACCES~2"><b>EACCES</b></a></dt>
  <dd>The access mode of the open file description associated with <i>fd</i> is
      not O_SEARCH and the permissions of the directory underlying <i>fd</i> do
      not permit directory searches.</dd>
  <dt id="EBADF"><a class="permalink" href="#EBADF"><b>EBADF</b></a></dt>
  <dd>The <i>path</i> argument does not specify an absolute path and the
      <i>fd</i> argument is neither AT_FDCWD nor a valid file descriptor open
      for reading or searching.</dd>
  <dt id="ENOTDIR~2"><a class="permalink" href="#ENOTDIR~2"><b>ENOTDIR</b></a></dt>
  <dd>The <i>path</i> argument is not an absolute path and <i>fd</i> is a file
      descriptor associated with a non-directory file.</dd>
</dl>
<p class="Pp">These functions may fail if:</p>
<dl class="Bl-tag">
  <dt id="ELOOP~2"><a class="permalink" href="#ELOOP~2"><b>ELOOP</b></a></dt>
  <dd>More than {SYMLOOP_MAX} symbolic links were encountered during resolution
      of the <i>path</i> argument.</dd>
  <dt id="ENAMETOOLONG~2"><a class="permalink" href="#ENAMETOOLONG~2"><b>ENAMETOOLONG</b></a></dt>
  <dd>
    <br>
    The length of a pathname exceeds {PATH_MAX}, or pathname resolution of a
      symbolic link produced an intermediate result with a length that exceeds
      {PATH_MAX}.</dd>
</dl>
<p class="Pp"><i>The following sections are informative.</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<section class="Ss">
<h2 class="Ss" id="Creating_a_FIFO_Special_File"><a class="permalink" href="#Creating_a_FIFO_Special_File">Creating
  a FIFO Special File</a></h2>
<p class="Pp">The following example shows how to create a FIFO special file
    named <b>/home/cnd/mod_done</b>, with read/write permissions for owner, and
    with read permissions for group and others.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;</pre>
<pre>dev_t dev;
int   status;
...
status  = mknod("/home/cnd/mod_done", S_IFIFO | S_IWUSR |
<br>
    S_IRUSR | S_IRGRP | S_IROTH, dev);</pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="APPLICATION_USAGE"><a class="permalink" href="#APPLICATION_USAGE">APPLICATION
  USAGE</a></h1>
<p class="Pp">The <i>mkfifo</i>() function is preferred over this function for
    making FIFO special files.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RATIONALE"><a class="permalink" href="#RATIONALE">RATIONALE</a></h1>
<p class="Pp">The POSIX.1‐1990 standard required that the group ID of a
    newly created file be set to the group ID of its parent directory or to the
    effective group ID of the creating process. FIPS 151‐2 required that
    implementations provide a way to have the group ID be set to the group ID of
    the containing directory, but did not prohibit implementations also
    supporting a way to set the group ID to the effective group ID of the
    creating process. Conforming applications should not assume which group ID
    will be used. If it matters, an application can use <i>chown</i>() to set
    the group ID after the file is created, or determine under what conditions
    the implementation will set the desired group ID.</p>
<p class="Pp">The purpose of the <i>mknodat</i>() function is to create
    directories, special files, or regular files in directories other than the
    current working directory without exposure to race conditions. Any part of
    the path of a file could be changed in parallel to a call to <i>mknod</i>(),
    resulting in unspecified behavior. By opening a file descriptor for the
    target directory and using the <i>mknodat</i>() function it can be
    guaranteed that the newly created directory, special file, or regular file
    is located relative to the desired directory.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUTURE_DIRECTIONS"><a class="permalink" href="#FUTURE_DIRECTIONS">FUTURE
  DIRECTIONS</a></h1>
<p class="Pp">None.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><i><i>chmod</i>()</i>, <i><i>creat</i>()</i>, <i><i>exec</i></i>,
    <i><i>fstatat</i>()</i>, <i><i>mkdir</i>()</i>, <i><i>mkfifo</i>()</i>,
    <i><i>open</i>()</i>, <i><i>umask</i>()</i></p>
<p class="Pp">The Base Definitions volume of POSIX.1‐2017,
    <i><b>&lt;fcntl.h&gt;</b></i>, <i><b>&lt;sys_stat.h&gt;</b></i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Portions of this text are reprinted and reproduced in electronic
    form from IEEE Std 1003.1-2017, Standard for Information Technology --
    Portable Operating System Interface (POSIX), The Open Group Base
    Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of
    Electrical and Electronics Engineers, Inc and The Open Group. In the event
    of any discrepancy between this version and the original IEEE and The Open
    Group Standard, the original IEEE and The Open Group Standard is the referee
    document. The original Standard can be obtained online at
    http://www.opengroup.org/unix/online.html .</p>
<p class="Pp">Any typographical or formatting errors that appear in this page
    are most likely to have been introduced during the conversion of the source
    files to man page format. To report such errors, see
    https://www.kernel.org/doc/man-pages/reporting_bugs.html .</p>
</section>
</div>
<table class="foot">
  <tbody><tr>
    <td class="foot-date">2017</td>
    <td class="foot-os">IEEE/The Open Group</td>
  </tr>
</tbody></table>
</div>


<script id="res-script" src="/res/dist/res/main.js" type="text/javascript"></script>
</body></html>