<!DOCTYPE html><html><!-- This is an automatically generated file.  Do not edit.
   t
   Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
   and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
  
   SPDX-License-Identifier: GPL-2.0-or-later
  
   Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
   --><head>
<meta name="dc.identifier" content="res/57fd8b67769fff8958a32787ac01ffa976bce136">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>fd(4)</title>
<link id="res-style" rel="stylesheet" href="/res/dist/res/style.css" type="text/css">
</head>
<body>
<div id="book-container">
<table class="head">
  <tbody><tr>
    <td class="head-ltitle">fd(4)</td>
    <td class="head-vol">Device Drivers Manual</td>
    <td class="head-rtitle">fd(4)</td>
  </tr>
</tbody></table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">fd - floppy disk device</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONFIGURATION"><a class="permalink" href="#CONFIGURATION">CONFIGURATION</a></h1>
<p class="Pp">Floppy drives are block devices with major number 2. Typically
    they are owned by root:floppy (i.e., user root, group floppy) and have
    either mode 0660 (access checking via group membership) or mode 0666
    (everybody has access). The minor numbers encode the device type, drive
    number, and controller number. For each device type (that is, combination of
    density and track count) there is a base minor number. To this base number,
    add the drive's number on its controller and 128 if the drive is on the
    secondary controller. In the following device tables, <i>n</i> represents
    the drive number.</p>
<p class="Pp"><b>Warning: if you use formats with more tracks</b> <b>than
    supported by your drive, you may cause it mechanical damage.</b> Trying once
    if more tracks than the usual 40/80 are supported should not damage it, but
    no warranty is given for that. If you are not sure, don't create device
    entries for those formats, so as to prevent their usage.</p>
<p class="Pp">Drive-independent device files which automatically detect the
    media format and capacity:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i></td>
    <td style="text-align: center;">0</td>
  </tr>
</tbody></table>
<p class="Pp">5.25 inch double-density device files:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td>Capacity</td>
    <td>Cyl.</td>
    <td>Sect.</td>
    <td>Heads</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">KiB</td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>d360</b></td>
    <td style="text-align: center;">360</td>
    <td style="text-align: center;">40</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">4</td>
  </tr>
</tbody></table>
<p class="Pp">5.25 inch high-density device files:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td>Capacity</td>
    <td>Cyl.</td>
    <td>Sect.</td>
    <td>Heads</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">KiB</td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h360</b></td>
    <td style="text-align: center;">360</td>
    <td style="text-align: center;">40</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">20</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h410</b></td>
    <td style="text-align: center;">410</td>
    <td style="text-align: center;">41</td>
    <td style="text-align: center;">10</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">48</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h420</b></td>
    <td style="text-align: center;">420</td>
    <td style="text-align: center;">42</td>
    <td style="text-align: center;">10</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">64</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h720</b></td>
    <td style="text-align: center;">720</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">24</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h880</b></td>
    <td style="text-align: center;">880</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">11</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">80</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h1200</b></td>
    <td style="text-align: center;">1200</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">15</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">8</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h1440</b></td>
    <td style="text-align: center;">1440</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">18</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">40</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h1476</b></td>
    <td style="text-align: center;">1476</td>
    <td style="text-align: center;">82</td>
    <td style="text-align: center;">18</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">56</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h1494</b></td>
    <td style="text-align: center;">1494</td>
    <td style="text-align: center;">83</td>
    <td style="text-align: center;">18</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">72</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>h1600</b></td>
    <td style="text-align: center;">1600</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">20</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">92</td>
  </tr>
</tbody></table>
<p class="Pp">3.5 inch double-density device files:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td>Capacity</td>
    <td>Cyl.</td>
    <td>Sect.</td>
    <td>Heads</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">KiB</td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u360</b></td>
    <td style="text-align: center;">360</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">1</td>
    <td style="text-align: center;">12</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u720</b></td>
    <td style="text-align: center;">720</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">16</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u800</b></td>
    <td style="text-align: center;">800</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">10</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">120</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1040</b></td>
    <td style="text-align: center;">1040</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">13</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">84</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1120</b></td>
    <td style="text-align: center;">1120</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">14</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">88</td>
  </tr>
</tbody></table>
<p class="Pp">3.5 inch high-density device files:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td>Capacity</td>
    <td>Cyl.</td>
    <td>Sect.</td>
    <td>Heads</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">KiB</td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u360</b></td>
    <td style="text-align: center;">360</td>
    <td style="text-align: center;">40</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">12</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u720</b></td>
    <td style="text-align: center;">720</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">9</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">16</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u820</b></td>
    <td style="text-align: center;">820</td>
    <td style="text-align: center;">82</td>
    <td style="text-align: center;">10</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">52</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u830</b></td>
    <td style="text-align: center;">830</td>
    <td style="text-align: center;">83</td>
    <td style="text-align: center;">10</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">68</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1440</b></td>
    <td style="text-align: center;">1440</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">18</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">28</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1600</b></td>
    <td style="text-align: center;">1600</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">20</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">124</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1680</b></td>
    <td style="text-align: center;">1680</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">21</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">44</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1722</b></td>
    <td style="text-align: center;">1722</td>
    <td style="text-align: center;">82</td>
    <td style="text-align: center;">21</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">60</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1743</b></td>
    <td style="text-align: center;">1743</td>
    <td style="text-align: center;">83</td>
    <td style="text-align: center;">21</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">76</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1760</b></td>
    <td style="text-align: center;">1760</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">22</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">96</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1840</b></td>
    <td style="text-align: center;">1840</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">23</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">116</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u1920</b></td>
    <td style="text-align: center;">1920</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">24</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">100</td>
  </tr>
</tbody></table>
<p class="Pp">3.5 inch extra-density device files:</p>
<table class="tbl">
  <tbody><tr>
    <td>Name</td>
    <td>Capacity</td>
    <td>Cyl.</td>
    <td>Sect.</td>
    <td>Heads</td>
    <td style="text-align: center;">Base</td>
  </tr>
  <tr style="border-bottom-style: solid;">
    <td></td>
    <td style="text-align: center;">KiB</td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;"></td>
    <td style="text-align: center;">minor #</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u2880</b></td>
    <td style="text-align: center;">2880</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">36</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">32</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>CompaQ</b></td>
    <td style="text-align: center;">2880</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">36</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">36</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u3200</b></td>
    <td style="text-align: center;">3200</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">40</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">104</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u3520</b></td>
    <td style="text-align: center;">3520</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">44</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">108</td>
  </tr>
  <tr>
    <td><b>fd</b><i>n</i><b>u3840</b></td>
    <td style="text-align: center;">3840</td>
    <td style="text-align: center;">80</td>
    <td style="text-align: center;">48</td>
    <td style="text-align: center;">2</td>
    <td style="text-align: center;">112</td>
  </tr>
</tbody></table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>fd</b> special files access the floppy disk drives in raw mode.
    The following <b>ioctl</b>(2) calls are supported by <b>fd</b> devices:</p>
<dl class="Bl-tag">
  <dt id="FDCLRPRM"><a class="permalink" href="#FDCLRPRM"><b>FDCLRPRM</b></a></dt>
  <dd>clears the media information of a drive (geometry of disk in drive).</dd>
  <dt id="FDSETPRM"><a class="permalink" href="#FDSETPRM"><b>FDSETPRM</b></a></dt>
  <dd>sets the media information of a drive. The media information will be lost
      when the media is changed.</dd>
  <dt id="FDDEFPRM"><a class="permalink" href="#FDDEFPRM"><b>FDDEFPRM</b></a></dt>
  <dd>sets the media information of a drive (geometry of disk in drive). The
      media information will not be lost when the media is changed. This will
      disable autodetection. In order to reenable autodetection, you have to
      issue an <b>FDCLRPRM</b>.</dd>
  <dt id="FDGETDRVTYP"><a class="permalink" href="#FDGETDRVTYP"><b>FDGETDRVTYP</b></a></dt>
  <dd>returns the type of a drive (name parameter). For formats which work in
      several drive types, <b>FDGETDRVTYP</b> returns a name which is
      appropriate for the oldest drive type which supports this format.</dd>
  <dt id="FDFLUSH"><a class="permalink" href="#FDFLUSH"><b>FDFLUSH</b></a></dt>
  <dd>invalidates the buffer cache for the given drive.</dd>
  <dt id="FDSETMAXERRS"><a class="permalink" href="#FDSETMAXERRS"><b>FDSETMAXERRS</b></a></dt>
  <dd>sets the error thresholds for reporting errors, aborting the operation,
      recalibrating, resetting, and reading sector by sector.</dd>
  <dt id="FDSETMAXERRS~2"><a class="permalink" href="#FDSETMAXERRS~2"><b>FDSETMAXERRS</b></a></dt>
  <dd>gets the current error thresholds.</dd>
  <dt id="FDGETDRVTYP~2"><a class="permalink" href="#FDGETDRVTYP~2"><b>FDGETDRVTYP</b></a></dt>
  <dd>gets the internal name of the drive.</dd>
  <dt id="FDWERRORCLR"><a class="permalink" href="#FDWERRORCLR"><b>FDWERRORCLR</b></a></dt>
  <dd>clears the write error statistics.</dd>
  <dt id="FDWERRORGET"><a class="permalink" href="#FDWERRORGET"><b>FDWERRORGET</b></a></dt>
  <dd>reads the write error statistics. These include the total number of write
      errors, the location and disk of the first write error, and the location
      and disk of the last write error. Disks are identified by a generation
      number which is incremented at (almost) each disk change.</dd>
  <dt id="FDTWADDLE"><a class="permalink" href="#FDTWADDLE"><b>FDTWADDLE</b></a></dt>
  <dd>Switch the drive motor off for a few microseconds. This might be needed in
      order to access a disk whose sectors are too close together.</dd>
  <dt id="FDSETDRVPRM"><a class="permalink" href="#FDSETDRVPRM"><b>FDSETDRVPRM</b></a></dt>
  <dd>sets various drive parameters.</dd>
  <dt id="FDGETDRVPRM"><a class="permalink" href="#FDGETDRVPRM"><b>FDGETDRVPRM</b></a></dt>
  <dd>reads these parameters back.</dd>
  <dt id="FDGETDRVSTAT"><a class="permalink" href="#FDGETDRVSTAT"><b>FDGETDRVSTAT</b></a></dt>
  <dd>gets the cached drive state (disk changed, write protected et al.)</dd>
  <dt id="FDPOLLDRVSTAT"><a class="permalink" href="#FDPOLLDRVSTAT"><b>FDPOLLDRVSTAT</b></a></dt>
  <dd>polls the drive and return its state.</dd>
  <dt id="FDGETFDCSTAT"><a class="permalink" href="#FDGETFDCSTAT"><b>FDGETFDCSTAT</b></a></dt>
  <dd>gets the floppy controller state.</dd>
  <dt id="FDRESET"><a class="permalink" href="#FDRESET"><b>FDRESET</b></a></dt>
  <dd>resets the floppy controller under certain conditions.</dd>
  <dt id="FDRAWCMD"><a class="permalink" href="#FDRAWCMD"><b>FDRAWCMD</b></a></dt>
  <dd>sends a raw command to the floppy controller.</dd>
</dl>
<p class="Pp">For more precise information, consult also the
    <i>&lt;linux/fd.h&gt;</i> and <i>&lt;linux/fdreg.h&gt;</i> include files, as
    well as the <b>floppycontrol</b>(1) manual page.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<p class="Pp"><i>/dev/fd*</i></p>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<p class="Pp">The various formats permit reading and writing many types of
    disks. However, if a floppy is formatted with an inter-sector gap that is
    too small, performance may drop, to the point of needing a few seconds to
    access an entire track. To prevent this, use interleaved formats.</p>
<p class="Pp">It is not possible to read floppies which are formatted using GCR
    (group code recording), which is used by Apple II and Macintosh computers
    (800k disks).</p>
<p class="Pp">Reading floppies which are hard sectored (one hole per sector,
    with the index hole being a little skewed) is not supported. This used to be
    common with older 8-inch floppies.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>chown</b>(1), <b>floppycontrol</b>(1), <b>getfdprm</b>(1),
    <b>mknod</b>(1), <b>superformat</b>(1), <b>mount</b>(8),
  <b>setfdprm</b>(8)</p>
</section>
</div>
<table class="foot">
  <tbody><tr>
    <td class="foot-date">(date)</td>
    <td class="foot-os">Linux man-pages (unreleased)</td>
  </tr>
</tbody></table>
</div>


<script id="res-script" src="/res/dist/res/main.js" type="text/javascript"></script>
</body></html>