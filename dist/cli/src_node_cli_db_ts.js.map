{"version":3,"file":"src_node_cli_db_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAG6B;AACS;AAGD;AAIrC,MAAM,MAAM,GAAG,sCAAS,CAAC,8CAAI,EAAE,oBAAoB,CAAC,CAAC;AAE9C,MAAM,KAAK,GAAG,GAAS,EAAE;IAC5B,MAAM,EAAE,GAAG,IAAI,+CAAM,CAAC,MAAM,CAAC,CAAC;IAC9B,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC;IAChB,MAAM,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC;IAE9B,MAAM,OAAO,GAAG,GAAG,EAAE;QACjB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,MAAc,EAAE,EAAE;YACpC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBACrB,IAAI,CAAC,CAAC,IAAI,KAAK,SAAS,EAAE;oBACtB,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC;iBACf;YACL,CAAC,CAAC;QACN,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,MAAM,MAAM,GAAG,GAAG,EAAE;QAChB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,MAAc,EAAE,EAAE;YACpC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBACrB,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,EAAE;oBACrB,CAAC,CAAC,GAAG,GAAG,EAAC,GAAG,EAAC,CAAC,EAAE,IAAI,EAAC,CAAC,EAAC,CAAC;iBAC3B;YACL,CAAC,CAAC;QACN,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,OAAO;QACH,EAAE,EAAE,EAAE;KACT;AACL,CAAC;;;;;;;;;;;;;;;ACzCM,MAAM,IAAI,GAAG,iBAAiB,CAAC","sources":["webpack://res/./src/node/cli/db.ts","webpack://res/./src/node/common/util.ts"],"sourcesContent":["\n// update db.json schemas\n\nimport * as path from 'path';\nimport { ROOT } from '../common/util';\n\nimport {Record} from '../../common/db';\nimport {NodeDb} from '../server/res';\n\n// const root = path.join(__dirname, '../../../../');\n// console.log('__dirname:', __dirname, 'root:', root);\nconst dbPath = path.join(ROOT, 'src/common/db.json');\n\nexport const getDb = async () => {\n    const db = new NodeDb(dbPath);\n    await db.load();\n    const anns = db.db.annotation;\n\n    const addTags = () => {\n        anns.records.forEach((record: Record) => {\n            record.notes.forEach(n => {\n                if (n.tags === undefined) {\n                    n.tags = [];\n                }\n            })\n        });\n        db.save();\n    }\n\n    const addPos = () => {\n        anns.records.forEach((record: Record) => {\n            record.notes.forEach(n => {\n                if (n.pos === undefined) {\n                    n.pos = {top:0, left:0};\n                }\n            })\n        });\n        db.save();\n    }\n\n    return {\n        db: db,\n    }\n}\n\n//\n// module.exports = (async () => {\n//\n//     const db = new NodeDb(dbPath);\n//     await db.load();\n//     const anns = db.db.annotation;\n//\n//     const addTags = () => {\n//         anns.records.forEach((record: Record) => {\n//             record.notes.forEach(n => {\n//                 if (n.tags === undefined) {\n//                     n.tags = [];\n//                 }\n//             })\n//         });\n//         db.save();\n//     }\n//\n//     const addPos = () => {\n//         anns.records.forEach((record: Record) => {\n//             record.notes.forEach(n => {\n//                 if (n.pos === undefined) {\n//                     n.pos = {top:0, left:0};\n//                 }\n//             })\n//         });\n//         db.save();\n//     }\n//\n//     return {\n//         db: db,\n//     }\n//\n// })();\n","\n\nexport const ROOT = '/home/zy/ws/res';\n\n\n"],"names":[],"sourceRoot":""}