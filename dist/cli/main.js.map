{"version":3,"file":"main.js","mappings":"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","sources":["webpack://res/./.keys.js","webpack://res/./src/node/cli/archive.ts","webpack://res/./src/node/cli/db.ts","webpack://res/./src/node/cli/dci.ts","webpack://res/./src/node/cli/epub.ts","webpack://res/./src/node/cli/gen.ts","webpack://res/./src/node/cli/ignorefile.ts","webpack://res/./src/node/cli/merge.ts","webpack://res/./src/node/cli/pre-code.ts","webpack://res/./src/node/common/util.ts","webpack://res/./src/node/index.ts","webpack://res/./src/node/server/crawler/html/neo4j-docs.ts","webpack://res/./src/node/server/hypothes.is/index.ts","webpack://res/./src/node/server/index.ts","webpack://res/./src/node/server/neo4j/client.ts","webpack://res/./src/node/server/nlp/index.ts","webpack://res/external commonjs \"body-parser\"","webpack://res/external commonjs \"cheerio\"","webpack://res/external commonjs \"compromise\"","webpack://res/external commonjs \"compromise-ngrams\"","webpack://res/external commonjs \"cors\"","webpack://res/external commonjs \"css\"","webpack://res/external commonjs \"express\"","webpack://res/external commonjs \"extract-zip\"","webpack://res/external commonjs \"got\"","webpack://res/external commonjs \"isomorphic-git\"","webpack://res/external commonjs \"jquery\"","webpack://res/external commonjs \"jsdom\"","webpack://res/external commonjs \"neo4j-driver\"","webpack://res/external commonjs \"stopword\"","webpack://res/external commonjs \"url\"","webpack://res/external commonjs \"yargs\"","webpack://res/external node-commonjs \"crypto\"","webpack://res/external node-commonjs \"fs\"","webpack://res/external node-commonjs \"http\"","webpack://res/external node-commonjs \"os\"","webpack://res/external node-commonjs \"path\"","webpack://res/external node-commonjs \"util\"","webpack://res/webpack/bootstrap","webpack://res/webpack/runtime/define property getters","webpack://res/webpack/runtime/hasOwnProperty shorthand","webpack://res/webpack/runtime/make namespace object","webpack://res/webpack/before-startup","webpack://res/webpack/startup","webpack://res/webpack/after-startup"],"sourcesContent":["\nexport const keys = {\n  h: {\n    token: '6879-y792Ui5Ik4Z0O09Z1IIOC50B_ooMN4bN2pBisYULE1s'\n   },\n  neo4j: {\n      uri: 'bolt://192.168.13.2:7687',\n      user: 'neo4j',\n      pw: 'puma-lava-trinity-madrid-unit-473',\n   },\n  redDirs: {\n      base: \"/home/zy/ws/src/prj/babel/src/prj/red/base/\"\n  },\n\n\n\n\n\n\n\ncomments: `\n\naaa\n\n`\n}\n\n","/**\n * Merge multiple htmls into a single one, using iframe.\n */\n\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as jsdom from 'jsdom';\n\n//TODO: you cannot apply js on iframes ....\n// problem is styles from different htmls would conflict.\n// cannot use global res.js\n\nconst STYLE_ELEM_ID = 'res-style';\nconst SCRIPT_ELEM_ID = 'res-script';\n\nconst template = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<link id=\"res-style\" rel=\"stylesheet\" href=\"/res/dist/res/style.css\" type=\"text/css\">\n</head>\n<body>\n<div id=\"book-container\"></div>\n<script id=\"res-script\" src=\"/res/dist/res/main.js\" type=\"text/javascript\"></script>\n</body>\n</html>\n`\n\nconst indexTemplate = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<link id=\"res-style\" rel=\"stylesheet\" href=\"/res/dist/res/style.css\" type=\"text/css\">\n</head>\n<body>\n<div id=\"res-wa-index\">\n<ul>\n</ul>\n</div>\n</body>\n</html>\n`\n\nconst WS_ROOT = '/home/zy/ws';\n\nexport class Archive {\n\n    private root: string;\n    private $index;\n    private indexFile: string;\n\n    constructor(\n        private inputFile?: string,\n    ) {\n\n        if (inputFile === undefined) {\n            this.root = path.join(WS_ROOT, 'res/res/wa');\n        } else {\n            if (!fs.existsSync(inputFile)) {\n                console.log(`no file ${inputFile}`);\n                return;\n            } else {\n                const stat = fs.lstatSync(inputFile);\n                if (stat.isDirectory()) {\n                    this.root = inputFile;\n                    this.inputFile = undefined;\n                } else if (stat.isFile() && inputFile.endsWith('.html')) {\n                    const prefix = path.join(WS_ROOT, 'res/res/');\n                    const d = path.parse(inputFile).dir;\n                    this.root = path.join(WS_ROOT, 'res/res/', d.substring(prefix.length));\n                }\n                else {\n                    console.log(`unsupported: ${inputFile}`);\n                    return;\n                }\n            }\n        }\n\n        console.log(`root: ${this.root}`);\n        this.indexFile = path.join(this.root, 'index.html');\n\n        // if (!fs.existsSync(this.indexFile)) {\n            fs.writeFileSync(this.indexFile, indexTemplate, {encoding: 'utf8'});\n        // }\n\n        const content = fs.readFileSync(this.indexFile, {encoding: 'utf8'});\n        const index = new jsdom.JSDOM(content);\n        this.$index = require('jquery')(index.window);\n\n        this.updateDir();\n    }\n\n    private updateDir() {\n        if (this.inputFile) {\n            this.update(this.inputFile);\n        }\n\n        // check if need to update index.html\n        const urls = new Map<string, string>();\n        this.generateIndex(this.root, urls);\n\n        Array.from(urls).sort(([url1, name1], [url2, name2]) =>\n         name1.localeCompare(name2, undefined, {sensitivity: 'accent'})).map(([url, name]) => {\n            this.$index('#res-wa-index ul').append(`\n<li><a href=\"${url}\" target=\"_blank\">${name}</a></li>\n`)\n        })\n\n        // update index.html\n        fs.writeFileSync(this.indexFile, this.$index('html')[0].outerHTML, {encoding: 'utf8'});\n    }\n\n    private generateIndex(root: string, urls: Map<string, string>) {\n        const files = fs.readdirSync(root);\n        files.forEach(file => {\n            const fullpath = path.resolve(root, file);\n            // console.log(fullpath);\n            if ( fs.lstatSync(fullpath).isDirectory() ) {\n                this.generateIndex(fullpath, urls);\n            } else if (fullpath.endsWith('.html') && !fullpath.endsWith('index.html')) {\n                const rel = fullpath.substring(WS_ROOT.length);\n                urls.set(rel, fullpath.substring(this.root.length)); //TODO:\n            }\n        });\n    }\n\n    private update(inputFile: string) {\n        console.log(`update: ${inputFile}`);\n        const content = fs.readFileSync(inputFile, {encoding: 'utf8'});\n        const target = new jsdom.JSDOM(content);\n        const $ = require('jquery')(target.window);\n\n        // check\n        if ($('#book-container').length === 0) {\n            const out = new jsdom.JSDOM(template);\n            const $out = require('jquery')(out.window);\n            $out('html').prepend($('head'));\n            $out('#book-container').append($('body').html());\n\n            fs.writeFileSync(inputFile, '<!DOCTYPE html>\\n' + $out('html')[0].outerHTML, {encoding: 'utf8'});\n        } else {\n            console.log(inputFile + ': already updated');\n        }\n    }\n}\n\n","\n// update db.json schemas\n\nimport * as path from 'path';\n\nimport {Record} from '../../common/db';\nimport {NodeDb} from '../server/res';\nimport {ROOT} from '../common/util';\n\n// const root = path.join(__dirname, '../../../../');\n// console.log('__dirname:', __dirname, 'root:', root);\nconst dbPath = path.join(ROOT, 'src/common/db.json');\n\nmodule.exports = (async () => {\n\n    const db = new NodeDb(dbPath);\n    await db.load();\n    const anns = db.db.annotation;\n\n    const addTags = () => {\n        anns.records.forEach((record: Record) => {\n            record.notes.forEach(n => {\n                if (n.tags === undefined) {\n                    n.tags = [];\n                }\n            })\n        });\n        db.save();\n    }\n\n    const addPos = () => {\n        anns.records.forEach((record: Record) => {\n            record.notes.forEach(n => {\n                if (n.pos === undefined) {\n                    n.pos = {top:0, left:0};\n                }\n            })\n        });\n        db.save();\n    }\n\n    return {\n        db: db,\n    }\n\n})();\n","import {appendIgnore, delIgnore, fromIgnoreFile} from './ignorefile';\nimport {listFiles as gitListFiles, remove as gitRemove, add as gitAdd} from 'isomorphic-git';\n\nconst fs = require('fs');\nconst path = require('path');\nconst crypto = require('crypto')\nimport * as cheerio from 'cheerio';\n\nconst DCI = '<meta name=\"dc.identifier\" content=\"res/';\nconst SCRIPT_ELEM_ID = 'res-script';\nconst STYLE_ELEM_ID = 'res-style';\n\nexport function checkDci(files: string[]) {\n    let htmlFiles = files;\n\n    // if no files are specified, check files in .gitignore\n    if (files.length === 0) {\n        htmlFiles = fromIgnoreFile()\n            .filter(path => path.base.endsWith('html'))\n            .map(path => path.dir + '/' + path.base);\n    }\n\n    htmlFiles.forEach(filename => {\n        const html = fs.readFileSync(filename);\n        const idx = html.indexOf(DCI);\n        if (idx === -1) {\n            console.log(`!! ${filename}`);\n        } else {\n            console.log(`** ${filename}`);\n        }\n    });\n}\n\nexport async function checkFiles() {\n    const added = fromIgnoreFile().map(path => path.dir + '/' + path.base).sort();\n    const files = await gitListFiles({\n        fs: fs,\n        dir: '.',\n    });\n\n    const ignoreDirs = [\n        'res/images'\n    ];\n\n    const fromIgnore = JSON.stringify(added);\n    const fromGit = JSON.stringify(\n        files.filter((file) =>\n            file.startsWith('res/')\n            && ignoreDirs.filter((dir) => file.startsWith(dir)).length === 0\n        ).sort());\n    if (fromIgnore !== fromGit) {\n        console.log('!! not consistent');\n        console.log('ignore: ' + fromIgnore);\n        console.log('   git: ' + fromGit);\n    } else {\n        console.log('** consistent:\\n' + added.join('\\n'));\n    }\n}\n\nconst enum Ext {\n    html = '.html',\n    pdf = '.pdf',\n}\n\nexport async function decorate(file: string, embedded: boolean, output: string) {\n    const filePath = path.parse(file);\n    const ext = filePath.ext;\n\n    // add dci automatically if it is a html file and dci doesn't exist\n    if ( ext === Ext.html ) {\n        const html = fs.readFileSync(file);\n\n        const $ = cheerio.load(html);\n\n        const $dci = $('meta[name=\"dc.identifier\"]');\n        if ($dci.length === 0) {\n            const sha1sum = crypto.createHash('sha1')\n            const hex = sha1sum.update(html).digest('hex');\n            console.log('create dci: res/' + hex);\n            $('head').prepend(`\\n<meta name=\"dc.identifier\" content=\"res/${hex}\">\\n`);\n        } else {\n            console.log(`dci existed, always keep this ID: ${$dci.attr('content')} because hypothes.is may use it.`);\n        }\n\n        // add ore replace inlined css and javascript\n        const $style = $(`#${STYLE_ELEM_ID}`);\n        if ( $style.length !== 0 ) {\n            $style.remove();\n        }\n//<meta name=\"dc.identifier\" content=\"res/6287b00253a4b52566edbef59f7ba7c1050ed0a7\">\n        const $script = $(`#${SCRIPT_ELEM_ID}`);\n        if ( $script.length !== 0 ) {\n            $script.remove();\n        }\n\n        if (embedded) {\n            const styleContent = fs.readFileSync('dist/res/style.css').toString();\n            $('head').append(`<style id=\"${STYLE_ELEM_ID}\">${styleContent}</style>\\n`);\n\n            const scriptContent = fs.readFileSync('dist/res/main.js').toString();\n            $('body').append(`<script id=\"${SCRIPT_ELEM_ID}\" type=\"text/javascript\">${scriptContent}</script>\\n`);\n        } else {\n            // link, easy for updating\n            $('head').append(`<link id=\"${STYLE_ELEM_ID}\" rel=\"stylesheet\" href=\"/res/dist/res/style.css\" type=\"text/css\"/>\\n`);\n\n            $('body').append(`<script id=\"${SCRIPT_ELEM_ID}\" src=\"/res/dist/res/main.js\" type=\"text/javascript\"></script>\\n`);\n\n        }\n\n        // copy if not the same file\n        fs.writeFileSync(output, $.html());\n\n    } else if ( ext === Ext.pdf ) {\n        // do nothing....\n    }\n}\n\nexport async function add(file: string) {\n    const filePath = path.parse(file);\n\n    // add to .gitignore\n    appendIgnore(filePath);\n\n    // add to git\n    gitAdd({\n        fs: fs,\n        dir: '.',\n        filepath: file\n    }).then(() => {\n        console.log(`${file} added to git`);\n    });\n}\n\n/**\n * Remove a file from git and index, but don't delete the file from fs.\n *\n * @param file file to be removed.\n */\nexport async function del(file: string) {\n    const files = await gitListFiles({\n        fs: fs,\n        dir: '.',\n    });\n\n    const list = files.filter(f => f === file);\n    if (list.length === 1) {\n        // remove from git\n        gitRemove({\n            fs: fs,\n            dir: '.',\n            filepath: list[0]\n        }).then(() => {\n            console.log(`${file} removed from git`);\n        });\n    } else {\n        console.log(`cannot find ${file}`);\n    }\n\n    // remove from .gitignore\n    delIgnore(path.parse(file));\n}\n","/**\n * Load, parse epub file and convert it to html.\n */\n\nimport * as path from 'path';\nimport cheerio from 'cheerio';\nimport * as css from 'css';\nimport * as fs from 'fs';\nimport {lstatSync, readFileSync, writeFileSync} from 'fs';\nimport * as extract from 'extract-zip';\n\nconst PATH_CONTAINER = 'META-INF/container.xml';\nconst TAG_ROOTFILE = 'rootfile';\nconst TAG_DC_TITLE_ESC = 'dc\\\\:title';\nconst TAG_DC_IDENTIFIER_ESC = 'dc\\\\:identifier';\n\nconst enum MediaType {\n    xhtml_xml = \"application/xhtml+xml\",\n    html = \"text/html\",\n}\n\ninterface htmlHead {\n    title: string\n}\n\nexport class Epub {\n\n    private $container: cheerio.Root;\n    private $rootfile: cheerio.Root;\n    private inputFile: string;\n    private outputFile: string\n    private output: string;\n    private root: string;\n    private extractDir: string;\n    private isEpub: boolean;\n    private srcRoot: string;\n\n    constructor(input: string, output: string) {\n        this.isEpub = false;\n        this.inputFile = path.resolve(input);\n        this.output = output;\n        this.srcRoot = path.join(__dirname, '../../../../');\n    }\n\n    async convert() {\n\n        const isDir = lstatSync(this.inputFile).isDirectory();\n        if (isDir) {\n\n            // const outputFile = this.output?\n            //     this.output : this.inputFile + '.html';\n            //\n            // const htmls = new Htmls(this.inputFile, outputFile);\n            // return htmls.convert();\n\n            this.root = this.inputFile;\n            this.outputFile = this.output? this.output : this.inputFile + '.html';\n\n        } else if (this.inputFile.endsWith('.epub')) {\n            //unzip to tmp\n            this.extractDir = '/tmp/res-epub';\n            await extract(this.inputFile, {dir: this.extractDir});\n            this.root = this.extractDir;\n            this.outputFile = this.output? this.output : this.inputFile.substring(0, this.inputFile.length-5) + '.html';\n            this.isEpub = true;\n        } else {\n            ////\n            console.log('unknown type');\n            process.exit(-1);\n        }\n\n        this.$container = cheerio.load(\n            readFileSync(this.fullname(PATH_CONTAINER), {encoding: 'utf8'}),\n            {\n                xmlMode: true\n            }\n        );\n\n        const rootfilePath = this.$container(TAG_ROOTFILE).attr('full-path');\n\n        this.$rootfile = cheerio.load(\n            readFileSync(this.fullname(rootfilePath), {encoding: 'utf8'}),\n            {\n                xmlMode: true\n            }\n        );\n\n        // use filename as title\n        const head: htmlHead = {\n            title: path.basename(this.outputFile, '.html')\n        };\n\n        // process spine\n        const itemrefs: string[] = [];\n        this.$rootfile('spine itemref[idref]').each((index: number, element: cheerio.TagElement) => {\n            itemrefs.push(element.attribs['idref']);\n        });\n\n        const rootfileDir = path.parse(rootfilePath).dir;\n        const htmlFiles: {id: string, href: string }[] = [];\n        this.$rootfile(`manifest > item[media-type=\"${MediaType.xhtml_xml}\"]\n, manifest > item[media-type=\"${MediaType.html}\"]`)\n            .each((index: number, element: cheerio.TagElement) =>\n                htmlFiles.push({\n                    id: element.attribs['id'],\n                    href: path.join(this.root, rootfileDir, element.attribs['href']),\n                })\n        );\n\n        const sortedHtmlFiles = htmlFiles.sort((a, b) => {\n            const ai = itemrefs.indexOf(a.id);\n            const bi = itemrefs.indexOf(b.id);\n            if (ai === -1)\n                return -1;\n            else if (bi === -1)\n                return 1;\n            else if (ai === bi)\n                return 0;\n            else\n                return  ai < bi? -1: 1;\n        }).map((a) => a.href);\n\n        // merge these files\n        const html = this.mergeAll(head, sortedHtmlFiles);\n\n        writeFileSync(this.outputFile, html, {encoding: 'utf8'});\n\n        // delete tmp\n        if (this.extractDir !== undefined) {\n            fs.rmSync(this.extractDir, { recursive: true, force: true });\n        }\n    }\n\n    private parse(filename: string, single?: boolean) {\n        const dir = path.parse(filename).dir;\n        const $ = cheerio.load(\n            readFileSync(filename, {encoding: 'utf8'}),\n            {\n                xmlMode: true,\n                decodeEntities: false\n        });\n\n        // workaround: <a id='xxx'/>contents\n        // is parsed incorrect to\n        // <a id='xxx'>contents</a>\n        $(':not(:has(*))').each((index: number, element: cheerio.TagElement) => {\n            // console.log('empty elem: ', element.name);\n            if (element.firstChild === null) {\n                if (['title', 'meta', 'style', 'object', 'link'].indexOf(element.name) === -1) {\n                    // console.log('empty elem: ', element.name);\n                    $(element).append('<span class=\"res-tmp-span\" style=\"display: none;\">&nbsp;</span>');\n                }\n            }\n        });\n\n        // this file's relative path to root\n        const rel = path.relative(this.root, filename);\n        // console.log(rel);\n\n        // duplicate <a name='..'> to <a id='..'>\n        $('a[name]').each((index: number, element: cheerio.TagElement) => {\n            const id = element.attribs['id'];\n            if (id === undefined) {\n                element.attribs['id'] = element.attribs['name'];\n            }\n        });\n\n        // update id in a single doc\n        if (!single) {\n            $('[id]').each((index: number, element: cheerio.TagElement) => {\n                element.attribs['id'] = `${rel}.${element.attribs['id']}`;\n            });\n\n            $('a[href]').each((index: number, element: cheerio.TagElement) => {\n                const href = element.attribs['href'];\n\n                // anchors\n                if (!href.startsWith('http')) {\n                    let newHref = '#';\n\n                    const parts = href.split('#', 2);\n                    if (parts.length === 1) {\n                        // link to other doc\n                        const fileRel = path.relative(this.root, path.join(dir, parts[0]));\n                        newHref = `#${fileRel}`;\n                    }\n                    else if (parts.length>1) {\n                        // local link\n                        if (parts[0] === '') {\n                            newHref = `#${rel}.${parts[1]}`;\n                        } else {\n                            const fileRel = path.relative(this.root, path.join(dir, parts[0]));\n                            newHref = `#${fileRel}.${parts[1]}`;\n                        }\n                    }\n\n                    element.attribs['href'] = newHref;\n                }\n\n            });\n        }\n\n        // embed css\n        const styles = new Map<string, cheerio.TagElement>();\n        let inlineStyles = '';\n        $('style, link[type=\"text/css\"], link[rel=\"stylesheet\"], script').each((index: number, element: cheerio.TagElement) => {\n            const tag = $(element).prop(\"tagName\").toLowerCase();\n\n            // external style file\n            if (tag === 'link') {\n                const type = $(element).attr('type');\n                if (type === 'text/css') {\n                    const url = path.relative(this.root, path.join(dir, element.attribs['href']));\n                    styles.set(url, element);\n                }\n            }\n\n            // inlined styles\n            else if (tag === 'style') {\n                // replace font path\n                const cssContent = $(element).text();\n                inlineStyles += this.updateCss(cssContent, filename);\n                inlineStyles += '\\n';\n            }\n\n            // javascript\n            else if (tag === 'script') {\n                const src = element.attribs['src'];\n                if (src !== undefined) {\n                    const jsFile = path.join(dir, src);\n                    console.log(jsFile);\n                    if (fs.existsSync(jsFile)) {\n                        $(element).empty();\n                        $(element).removeAttr('src');\n                        const js = readFileSync(jsFile, {encoding: 'utf-8'}).toString();\n                        $(element).text(js);\n                    }\n                }\n            }\n        });\n\n        let attrs = '';\n        for (const [key, value] of Object.entries($('body').attr())) {\n            attrs += `${key}=\"${value}\" `;\n        }\n\n        // embed images\n        $('img, image, link[rel=\"icon\"]').each((index: number, element: cheerio.TagElement) => {\n            this.genBase64Image(dir, 'src', element);\n            this.genBase64Image(dir, 'href', element);\n            this.genBase64Image(dir, 'xlink:href', element);\n        });\n\n        // not working\n        // $('.res-tmp-span').remove();\n        const bookContent = $('body').html().replace(/<span class=\"res-tmp-span\" style=\"display: none;\">&nbsp;<\\/span>/g, '');\n\n        let head: string | undefined = undefined;\n        if (single) {\n            $('head link[rel=\"stylesheet\"]').remove();\n            head = $('head').html();\n        }\n\n        return {\n            styles: styles,\n            inlineStyles: inlineStyles,\n            body: `<div id=\"${rel}\"><div ${attrs}>\\n${bookContent}</div></div>\\n`,\n            head: head\n        }\n    }\n\n    private genBase64Image(dir: string, attr: string, elem: cheerio.TagElement) {\n        const val = elem.attribs[attr];\n        // console.log(attr + ': ' + val);\n        //TODO: fetch images from remote\n        if ( val !== undefined\n            && !val.startsWith('data:image/')\n            && !val.startsWith('http://')\n            && !val.startsWith('https://')\n        ) {\n            const ext = path.parse(val).ext.substring(1);\n            const prefix = `data:image/${ext};base64,`;\n            const file = path.join(dir, val);\n            if(fs.existsSync(file)) {\n                elem.attribs[attr] = prefix + readFileSync(file, {encoding: 'base64'});\n            }\n        }\n    }\n\n    private getBase64Image(imageFile: string) {\n\n        const ext = path.parse(imageFile).ext.substring(1);\n        const prefix = `data:image/${ext};base64,`;\n        if(fs.existsSync(imageFile)) {\n            return prefix + readFileSync(imageFile, {encoding: 'base64'});\n        } else {\n            return undefined;\n        }\n    }\n\n    private merge(file1: string, html: any, single?: boolean): any {\n\n        const f1 = this.parse(file1, single);\n\n        f1.styles.forEach((elem: cheerio.TagElement, href: string) => {\n            const file = path.join(this.root, href);\n            if (fs.existsSync(file)) {\n                const cssContent = readFileSync(file, {encoding: 'utf8'}).toString();\n                html.styles.add(this.updateCss(cssContent, file));\n            }\n        });\n\n        html.styles.add(f1.inlineStyles);\n        html.body.append(f1.body);\n        html.head = f1.head;\n        return html;\n    }\n\n    private updateCss(cssContent: string, file: string) {\n        // console.log(cssContent);\n        console.log(file);\n        const style = css.parse(cssContent);\n        style.stylesheet.rules.forEach(rule => {\n            // if (rule.type === 'font-face') {\n                //@ts-ignore\n                rule?.declarations?.filter(decl =>\n                    decl.property === 'src'\n                    || decl.property === 'background-image'\n                ).forEach((decl: any) => {\n\n                    const value = decl.value;\n                    let start = -1;\n                    let end = 0;\n\n                    //TODO: url may be not at the beginning\n                    if (value.startsWith('url(\"')) {\n                        start = 5;\n                        for (let i = start; i < value.length; ++i) {\n                            if (value[i] === '\"') {\n                                end = i;\n                                break;\n                            }\n                        }\n                    } else if (value.startsWith('url(\\'')) {\n                        start = 5;\n                        for (let i = start; i < value.length; ++i) {\n                            if (value[i] === '\\'') {\n                                end = i;\n                                break;\n                            }\n                        }\n                    } else if (value.startsWith('url(')) {\n                        start = 4;\n                        for (let i = start; i < value.length; ++i) {\n                            if (value[i] === ')') {\n                                end = i;\n                                break;\n                            }\n                        }\n                    }\n\n                    if (end > 0) {\n                        const fontPath = value.substring(start, end);\n                        const fontName = path.parse(fontPath).base;\n                        // console.log('font: ', fontPath);\n                        // check exists such font\n                        const fontSrcPath = path.join(path.dirname(file), fontPath);\n                        const fontDestPath = path.join(this.srcRoot, 'dist/assets/fonts/', fontName);\n\n                        // copy font files\n                        if (rule.type === 'font-face' && decl.property === 'src') {\n\n                            fs.mkdirSync(path.dirname(fontDestPath), {recursive: true});\n                            if (!fs.existsSync(fontDestPath) && fs.existsSync(fontSrcPath)) {\n                                console.log('copy font: ', fontPath);\n                                fs.cpSync(fontSrcPath, fontDestPath, {recursive: true});\n                            }\n\n                            let fullPath = '/res/dist/assets/fonts/' + fontName;\n                            const newValue = value.substring(0, start)\n                                + fullPath + value.substring(end);\n                            decl.value = newValue;\n                        }\n\n                        // embed images\n                        else if (decl.property === 'background-image') {\n                            const data = this.getBase64Image(fontSrcPath);\n                            if (data !== undefined) {\n                                const newValue = value.substring(0, start)\n                                    + data + value.substring(end);\n                                decl.value = newValue;\n                            }\n                        }\n                    }\n                });\n            // }\n        });\n\n        return css.stringify(style);\n    }\n\n    private mergeAll(head: htmlHead, files: string[]): string {\n        const $ = cheerio.load(`<!DOCTYPE html>\n<html>\n<head>\n</head>\n<body>\n<div id=\"book-container\"></div>\n</body>\n</html>`);\n\n        // $('head').append(`<title>${head.title}</title>\\n`);\n        const html: any = {\n            styles: new Set<string>(),\n            head: undefined,\n            body: $('#book-container')\n        };\n\n        let headStr = `\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<title>${head.title}</title>\\n`;\n\n        if (files.length === 1) {\n            this.merge(files[0], html, true);\n            headStr = html.head;\n        } else {\n            for (let i = 0; i < files.length; ++i) {\n                this.merge(files[i], html);\n            }\n        }\n\n        $('head').append(headStr);\n        $('head').append(`<style>\n${Array.from(html.styles).join('</style>\\n<style>\\n')}\n</style>\\n`);\n\n        return $.html();\n    }\n\n    // embed svg, css, javascript, images\n    private fullname(name: string) {\n        return path.join(this.root, name);\n    }\n\n}\n\n\n","import {fromIgnoreFile} from './ignorefile';\nimport {Db} from '../../common/db';\nimport {ParsedPath} from 'path';\nimport * as path from 'path';\n\nconst fs = require('fs');\n\nexport async function createIndex() {\n  const list = fromIgnoreFile();\n\n  const config = {\n    containerId: 'container',\n    data: list\n  };\n\n  const db_ = await require('./db');\n  const db: Db = db_.db;\n\n  list.forEach((l: ParsedPath & {stars: number, note: number}) => {\n    const url = encodeURI(path.join('/res/', l.dir, l.base));\n    const notes = db.getAnn(url);\n    let maxStars = 0;\n    notes.forEach(n => {\n      let stars = 0;\n      for(let i=0; i<n.note.length; ++i) {\n        if (n.note[i] === '⭐') {\n          ++stars;\n        }\n      }\n      maxStars = Math.max(maxStars, stars);\n    });\n    l.note = notes.length;\n    l.stars = maxStars;\n  })\n\n  const config_json = JSON.stringify(config);\n\n  const html = `\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>Res</title>\n        <link rel=\"stylesheet\" href=\"/res/dist/res/style.css\" />\n    </head>\n    <body>\n    <div id=\"${config.containerId}\"></div>\n    <script>var res_config = ${config_json};</script>\n    <script src=\"/res/dist/res/main.js\"></script>\n    </body>\n</html>\n`;\n\n  console.log('index.html created');\n  fs.writeFileSync('index.html', html);\n}\n\n","import * as os from 'os';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport {ParsedPath} from 'path';\n\nexport function fromIgnoreFile(): ParsedPath[] {\n    const check_str = '## files below will be committed';\n\n    const ignoreFile = fs.readFileSync('.gitignore').toString();\n    const includedFiles: ParsedPath[] = [];\n\n    let start = false;\n    ignoreFile.split(os.EOL).forEach(line => {\n        if(!start && line === check_str ) {\n            start = true;\n            return;\n        }\n\n        if(start && line.trim() !== '') {\n            // remove the leading char '!'\n            const filename = line.substring(1);\n            const p = path.parse(filename);\n            includedFiles.push(p);\n        }\n    })\n\n    return includedFiles;\n}\n\nexport function delIgnore(filePath: ParsedPath) {\n    const line = '\\n!' + filePath.dir + '/' + filePath.base;\n\n    const ignoreFile = fs.readFileSync('.gitignore').toString();\n\n    const idx = ignoreFile.indexOf(line);\n    if (idx !== -1) {\n        const newContent = ignoreFile.slice(0, idx) + ignoreFile.slice(idx + line.length);\n        console.log(`${line} removed from ignore`);\n        fs.writeFileSync('.gitignore', newContent);\n    } else {\n        console.log(`${line} not found`);\n    }\n}\n\nexport function appendIgnore(filePath: ParsedPath) {\n    const added = fromIgnoreFile();\n    const found = added.filter(path =>\n        filePath.dir === path.dir\n        && filePath.base === path.base\n    ).length > 0;\n\n    if (!found) {\n        let lines = '';\n\n        // check if is a symbolic link\n        const file = filePath.dir + '/' + filePath.base;\n        const stat = fs.lstatSync(file);\n        if (stat.isSymbolicLink()) {\n            console.log(`symbol link: ${file}`);\n            const real = fs.readlinkSync(file);\n            const realFile = path.relative('.', path.resolve(filePath.dir, real));\n            lines += '\\n!' + realFile;\n        }\n\n        lines += '\\n!' + file;\n        fs.appendFileSync('.gitignore', lines);\n        console.log(`++ ${lines}`);\n    }\n}\n","/**\n * Merge two htmls of same dom structure one of which is google-translated into a single one.\n */\n/// <reference types=\"node\" />\n\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as jsdom from 'jsdom';\n\nfunction getPath($: any, elem: HTMLElement) {\n\n    let path = '';\n    while (elem !== null)\n    {\n        if (elem.tagName.toLowerCase() === 'body') {\n            path = 'body' + path;\n            break;\n        }\n\n        let id = $(elem.parentNode).children(elem.tagName).index(elem);\n        let nth = ':eq(' + id + ')';\n        path = ' > ' + elem.tagName.toLowerCase() + nth + path;\n\n        elem = elem.parentElement;\n    }\n    if (path.startsWith('body')) {\n        return path;\n    } else {\n        return undefined;\n    }\n}\n\nexport function merge(from: string, to: string) {\n\n    // shoe not be nested\n    const selector = 'h1,h2,h3,h4,p,li,dt,dd,pre,blockquote';  //pre blockquote\n\n    const fromFile = path.resolve(from);\n    const toFile = path.resolve(to);\n    const dir = path.dirname(toFile);\n\n    const outName = path.parse(toFile).name + '.2.html';\n\n    const contentFrom = fs.readFileSync(fromFile).toString();\n    const contentTo = fs.readFileSync(toFile).toString();\n\n    const domFrom = new jsdom.JSDOM(contentFrom);\n    const $from = require('jquery')(domFrom.window);\n    const fromElems = $from(selector);\n\n    const domTo = new jsdom.JSDOM(contentTo);\n    const $to = require('jquery')(domTo.window);\n    const toElems = $to(selector);\n\n    const paths: string[] = [];\n\n    for(let i=0; i<fromElems.length; ++i) {\n        const $f = $from(fromElems[i]);\n\n        const p = getPath($from, $f[0]);\n        // console.log(p);\n        const parents = paths.filter(p_ => p.includes(p_));\n        // find p has parent in paths\n        if (parents.length === 0) {\n            paths.push(p);\n\n            // remove id\n            $f.removeAttr('id');\n\n            // remove id from children\n            $f.find('[id]').removeAttr('id');\n\n            // remove images (duplicated)\n            $f.find('img').remove();\n\n            if (!$f.is(':empty')) {\n                // get children html\n                const newHtml = $f.html();\n                const tag = $f.prop('tagName').toLowerCase();\n\n                // get attributes\n                let attrs = '';\n                $from.each($f[0].attributes, function () {\n                    if(this.specified) {\n                        attrs += `${this.name}=\\\"${this.value}\\\" `;\n                    }\n                });\n\n                $to(toElems[i]).after(`<${tag} ${attrs}>${newHtml}</${tag}>`);\n            }\n        } else {\n            console.log(p);\n            console.log(parents);\n        }\n    }\n\n    fs.writeFileSync(path.join(dir, outName), '<!DOCTYPE html>\\n' + $to('html').prop('outerHTML').toString());\n}\n","\n\n// remove <pre> source code containing translated.\n\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as jsdom from 'jsdom';\n\nexport const chineseReg = /[\\u3040-\\u30ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff\\uff66-\\uff9f]/g;\n\nexport function rm(from: string) {\n    const selector = 'pre';\n\n    const fromFile = path.resolve(from);\n\n    const dir = path.dirname(fromFile);\n    const outName = path.parse(fromFile).name + '.tmp.html';\n\n    const contentFrom = fs.readFileSync(fromFile).toString();\n    const domFrom = new jsdom.JSDOM(contentFrom);\n    const $ = require('jquery')(domFrom.window);\n    const $pres = $(selector);\n\n    $pres.each( function(index: number, elem: HTMLPreElement)  {\n        const hasCh = chineseReg.test($(elem).text());\n        if (hasCh) {\n            $(elem).remove();\n        }\n    })\n\n    console.log(path.join(dir, outName));\n    fs.writeFileSync(path.join(dir, outName), '<!DOCTYPE html>\\n' + $('html').prop('outerHTML').toString());\n}\n\n\n","\n\nexport const ROOT = '/home/zy/ws/res';\n\n\n","import * as yargs from 'yargs';\nimport {add, checkDci, checkFiles, del, decorate} from './cli/dci';\nimport {createIndex} from './cli/gen';\nimport {Arguments, Argv} from 'yargs';\nimport { Epub } from './cli/epub';\nimport { startServer } from './server/';\nimport { crawler } from './server/crawler/html/neo4j-docs';\nimport { fetch } from './server/hypothes.is';\nimport { words } from './server/nlp';\nimport {Neo4jClient} from './server/neo4j/client';\nimport {merge} from './cli/merge';\nimport {rm} from './cli/pre-code';\nimport * as path from 'path';\nimport {Archive} from './cli/archive'\n\nconst ROOT = '/home/zy/ws/res/';\n\n(async () =>{\n\n    const args: Argv = yargs\n        .usage('Usage: $0 [-a <filename>]')\n        .option('index', {\n            alias: 'i',\n            describe: 'Create index.html',\n            boolean: true,\n            default: false,\n        })\n        .option('add', {\n            alias: 'a',\n            describe: 'Add files to index',\n            type: 'string',\n        })\n        .option('update', {\n            alias: 'u',\n            describe: 'Update file with css and js',\n            type: 'string',\n        })\n        .option('delete', {\n            alias: 'd',\n            describe: 'Delete a file from index and git',\n            type: 'string',\n        })\n        .option('merge', {\n            alias: 'm',\n            describe: 'Merge two html files',\n            type: 'array',\n        })\n        .option('test', {\n            alias: 't',\n            describe: 'Test html files having dc identifier',\n            type: 'array',\n        })\n        .option('output', {\n            alias: 'o',\n            describe: 'Output filename',\n            type: 'string',\n        })\n        .option('convert', {\n            alias: 'c',\n            describe: 'Convert epub to a single html',\n            type: 'string',\n        })\n        .option('server', {\n            alias: 's',\n            describe: 'Start web server',\n            type: 'string',\n        })\n        .option('embedded', {\n            alias: 'e',\n            describe: 'Embed script code into html',\n            boolean: true,\n            default: false\n        })\n        .option('crawler', {\n            alias: 'n',\n            describe: 'Script as src link',\n            boolean: true,\n            default: false\n        })\n        .option('hypothes.is', {\n            alias: 'p',\n            describe: 'Script as src link',\n            boolean: true,\n            default: false\n        })\n        .option('nlp', {\n            alias: 'l',\n            describe: 'nlp',\n            type: 'string',\n        })\n        .option('pre', {\n            describe: 'delete ch pre',\n            type: 'string',\n        })\n        .command('frame [dir]', 'merge multiple html files into single one as iframes',\n        (yargs: any) => {\n            yargs.positional('dir', {\n                type: 'string'\n            })\n        }, (({dir}) => {\n                let p = undefined;\n                if (typeof dir === 'string') {\n                    p = path.join(ROOT, dir);\n                }\n                new Archive(p);\n            }))\n    ;\n\n    const argv: any = args.argv;\n    console.log(argv);\n\n\n    if (argv.i) {\n        await createIndex();\n    }\n\n    else if (argv.t !== undefined) {\n        checkDci(argv.t);\n        await checkFiles();\n    }\n\n    else if (argv.a !== undefined) {\n        await add(argv.a);\n        await createIndex();\n    }\n\n    else if (argv.u !== undefined) {\n        decorate(argv.u, argv.e, argv.o || argv.u);\n    }\n\n    else if (argv.d !== undefined) {\n        await del(argv.d);\n        await createIndex();\n    }\n\n    else if (argv.c !== undefined) {\n        const epub = new Epub(argv.c, argv.o);\n        await epub.convert();\n    }\n\n    else if (argv.s !== undefined) {\n        startServer();\n    }\n\n    else if (argv.n) {\n        crawler();\n    }\n\n    else if (argv.p) {\n        await fetch();\n    }\n\n    else if (argv.l) {\n        const sent = words(argv.l);\n\n        const client = new Neo4jClient();\n        const result = await client.addSent(sent);\n\n        console.log(result);\n\n        await client.dispose();\n    }\n\n    else if (argv.m) {\n        await merge(argv.m[0], argv.m[1]);\n    }\n\n    else if (argv.pre) {\n        rm(argv.pre);\n    }\n})();\n\n","\nimport * as cheerio from 'cheerio'\nimport got from 'got';\nimport * as url from 'url'\nimport * as fs from 'fs'\n\nexport async function crawler() {\n    const context = await getToc();\n    \n    fs.writeFileSync('/home/zhangyi/ws/res/out.html', context);\n}\n\nconst baseUrl = 'https://neo4j.com/docs/cypher-manual/current/'\n\nasync function getToc() {\n\n    let html = '<html><head>\\n';\n\n    console.log(baseUrl);\n    const { body } = await got(baseUrl);\n\n    const $ = cheerio.load(body);\n\n    const styles = await Promise.all($('link[rel=\"stylesheet\"]').get().map(async (css: any) => {\n\n        const $css = $(css);\n        \n        const url_ = url.resolve(baseUrl, $css.attr('href'));\n\n        console.log(url_);\n        const { body } = await got(url_);\n\n        //TODO: embed fonts\n\n\n        return body;\n    }));\n\n    const css = `<style>${styles.join('\\n')}</style>`;\n\n    const subpages = ($('.nav-list li a').get().map((a: any) => {\n\n        const $a = $(a);\n\n        const title = $a.text();\n        const url_ = url.resolve(baseUrl, $a.attr('href'));\n\n        return {\n            title: title,\n            url: url_\n        }\n\n    }));\n\n    const htmls = await Promise.all(subpages.map(async (page: any): Promise<any> => {\n        return await get(page.title, page.url); \n    }));\n\n    return html + css + '</head>\\n<body>' + htmls.map(html => html.content).join('\\n') + '</body></html>';\n}\n\nasync function get(title: string, pageUrl: string) {\n\n    console.log(pageUrl);\n    const { body } = await got(pageUrl);\n\n    const $ = cheerio.load(body);\n\n    // anchors\n\n    $('[id]').get().map(a => {\n        const $a = $(a);\n\n        const start = pageUrl.indexOf(baseUrl);\n        if(start !== -1) {\n            const newId =  pageUrl.substring(baseUrl.length).replace(/\\//g, '-') + $a.attr('id');\n\n            console.log(`${$a.attr('id')} -> ${newId}`)\n\n            $a.attr('id', newId);\n        }\n    });\n\n    // links\n\n    $('a[href]').get().map(a => {\n        const $a = $(a);\n\n        const url_ = url.resolve(pageUrl, $a.attr('href'));\n\n        const start = url_.indexOf(baseUrl);\n        if (start !== -1) {\n\n            const newUrl = '#' + url_.substring(baseUrl.length).replace(/\\//g, '-').replace(/#/, '');\n            console.log(`${$a.attr('href')} -> ${newUrl}`)\n\n            $a.attr('href', newUrl);\n\n\n        }\n\n    });\n\n    // images\n    await Promise.all($('img[src]').get().map(async a => {\n        const $a = $(a);\n\n        let src = $a.attr('src');\n\n        const parts = src.split('.');\n        let ext = 'png';\n        if (parts.length>1) {\n            ext = parts[parts.length-1];\n        }\n\n        // external source\n        if( src.startsWith('http') ) {\n\n        } else if ( !src.startsWith('data:image') ) {\n            // local \n\n            src = url.resolve(pageUrl, src);\n        } else {\n\n            return '';\n        }\n\n        if (src === 'https://dist.neo4j.com/wp-content/uploads/20210422142941/neo4j-logo-2020.svg') {\n            return '';\n        }\n\n        const aaa = src.split('/');\n        const name = aaa[aaa.length-1].substring(0, 64);\n        \n        const data = await new Promise<string>((resolve, reject) => {\n\n            /** server would block */\n            setTimeout(async () => {\n\n                console.log('got image: ' + src);\n                const {body, headers} = await got(src, {responseType: 'buffer'});\n\n                fs.writeFileSync(`/home/zhangyi/ws/res/tmp/${name}`, body);\n\n                const data = `data:${headers['content-type']};base64,` + Buffer.from(body).toString('base64');\n        \n                resolve(data);\n        \n\n            }, 5000);\n        })\n\n        $a.attr('src', data);\n\n    }));\n\n\n\n    const id = pageUrl.substring(baseUrl.length).replace(/\\//g, '-');\n\n    return {\n        content: $('main .content').wrap(`<div><div id=\"${id}\"></div></div>`).parent().parent().html()\n    }\n}\n","\nimport got from 'got';\nimport {keys} from '../../../../.keys';\n\n\nconst API = 'https://api.hypothes.is/api';\nconst TOKEN = keys.h.token;\n\n\nexport async function fetch() {\n\n   // updateUri('lcqwfNxXEeydPwP03KX9Hw',\n   //     'A Note on a Standard Strategy for Developing Loop Invariants and Loops',\n   //     'http://localhost:3000/res/res/cs/paper/1982%20A%20Note%20on%20a%20Standard%20Strategy%20for%20Developing%20Loop%20Invariants%20and%20Loops.Gries.pdf');\n\n}\n\nasync function fetchAll() {\n\n   const {body, headers} = await got.get(`${api.links.search.url}?user=acct:zhy@hypothes.is`, {\n\n      headers: {\n         Accept: 'application/vnd.hypothesis.v1+json',\n         Authorization: `Bearer ${TOKEN}`\n      }\n\n   });\n\n   console.log(headers);\n   console.log(body);\n}\n\nexport async function fetchOne(id: string) {\n\n   const url = api.links.annotation.read.url.replace(/:id/g, id);\n\n   console.log(url);\n   const {body, headers} = await got.get(`${url}?user=acct:zhy@hypothes.is`, {\n\n      headers: {\n         Accept: 'application/vnd.hypothesis.v1+json',\n         Authorization: `Bearer ${TOKEN}`\n      }\n\n   });\n\n   console.log(headers);\n   console.log(body);\n}\n\n// needs to fetch and modify\nexport async function updateUri(id: string, title: string, uri: string) {\n   // /html/body/div[3]/div[12]/div/div[8]/span/text()\n   //*[@id=\"index_split_010.html\"]/div/div[8]/span/text()\n   const ann = {\n      id: id,\n      uri: uri,\n      target: [\n          {\n             source: uri,\n             selector: [\n                {\n                   end: 406,\n                   type: \"TextPositionSelector\",\n                   start: 297\n                },\n                {\n                   type: \"TextQuoteSelector\",\n                   exact: \"A by-now-standard strategy for developing a loop invariant and loop was developedin [l] and explained in [2].\",\n                   prefix: \"1982Revised March 1983Abstract. \",\n                   suffix: \" Nevertheless, its use still pos\"\n                }\n             ]\n          }\n      ],\n      document: {\n         title: [\n            title\n         ]\n      },\n      links: {\n         incontext: 'https://hyp.is/' + id + '/' + uri.substring('http://'.length)\n      }\n   }\n\n   const url = api.links.annotation.update.url.replace(/:id/g, ann.id);\n\n   console.log(url);\n   console.log(JSON.stringify(ann));\n   const {body, headers} = await got.patch(`${url}?user=acct:zhy@hypothes.is`, {\n\n      headers: {\n         Accept: 'application/vnd.hypothesis.v1+json',\n         Authorization: `Bearer ${TOKEN}`\n      },\n\n      json: ann\n\n   });\n\n   console.log(headers);\n   console.log(body);\n}\n\nconst api =\n{\n    \"links\":{\n       \"annotation\":{\n          \"create\":{\n             \"method\":\"POST\",\n             \"url\":\"https://api.hypothes.is/api/annotations\",\n             \"desc\":\"Create an annotation\"\n          },\n          \"delete\":{\n             \"method\":\"DELETE\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id\",\n             \"desc\":\"Delete an annotation\"\n          },\n          \"read\":{\n             \"method\":\"GET\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id\",\n             \"desc\":\"Fetch an annotation\"\n          },\n          \"update\":{\n             \"method\":\"PATCH\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id\",\n             \"desc\":\"Update an annotation\"\n          },\n          \"flag\":{\n             \"method\":\"PUT\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id/flag\",\n             \"desc\":\"Flag an annotation for review\"\n          },\n          \"hide\":{\n             \"method\":\"PUT\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id/hide\",\n             \"desc\":\"Hide an annotation as a group moderator\"\n          },\n          \"unhide\":{\n             \"method\":\"DELETE\",\n             \"url\":\"https://api.hypothes.is/api/annotations/:id/hide\",\n             \"desc\":\"Unhide an annotation as a group moderator\"\n          }\n       },\n       \"search\":{\n          \"method\":\"GET\",\n          \"url\":\"https://api.hypothes.is/api/search\",\n          \"desc\":\"Search for annotations\"\n       },\n       \"bulk\":{\n          \"method\":\"POST\",\n          \"url\":\"https://api.hypothes.is/api/bulk\",\n          \"desc\":\"Perform multiple operations in one call\"\n       },\n       \"group\":{\n          \"member\":{\n             \"add\":{\n                \"method\":\"POST\",\n                \"url\":\"https://api.hypothes.is/api/groups/:pubid/members/:userid\",\n                \"desc\":\"Add the user in the request params to a group.\"\n             },\n             \"delete\":{\n                \"method\":\"DELETE\",\n                \"url\":\"https://api.hypothes.is/api/groups/:pubid/members/:userid\",\n                \"desc\":\"Remove the current user from a group\"\n             }\n          },\n          \"create\":{\n             \"method\":\"POST\",\n             \"url\":\"https://api.hypothes.is/api/groups\",\n             \"desc\":\"Create a new group\"\n          },\n          \"read\":{\n             \"method\":\"GET\",\n             \"url\":\"https://api.hypothes.is/api/groups/:id\",\n             \"desc\":\"Fetch a group\"\n          },\n          \"members\":{\n             \"read\":{\n                \"method\":\"GET\",\n                \"url\":\"https://api.hypothes.is/api/groups/:pubid/members\",\n                \"desc\":\"Fetch all members of a group\"\n             }\n          },\n          \"update\":{\n             \"method\":\"PATCH\",\n             \"url\":\"https://api.hypothes.is/api/groups/:id\",\n             \"desc\":\"Update a group\"\n          },\n          \"create_or_update\":{\n             \"method\":\"PUT\",\n             \"url\":\"https://api.hypothes.is/api/groups/:id\",\n             \"desc\":\"Create or update a group\"\n          }\n       },\n       \"groups\":{\n          \"read\":{\n             \"method\":\"GET\",\n             \"url\":\"https://api.hypothes.is/api/groups\",\n             \"desc\":\"Fetch the user's groups\"\n          }\n       },\n       \"links\":{\n          \"method\":\"GET\",\n          \"url\":\"https://api.hypothes.is/api/links\",\n          \"desc\":\"URL templates for generating URLs for HTML pages\"\n       },\n       \"profile\":{\n          \"read\":{\n             \"method\":\"GET\",\n             \"url\":\"https://api.hypothes.is/api/profile\",\n             \"desc\":\"Fetch the user's profile\"\n          },\n          \"groups\":{\n             \"read\":{\n                \"method\":\"GET\",\n                \"url\":\"https://api.hypothes.is/api/profile/groups\",\n                \"desc\":\"Fetch the current user's groups\"\n             }\n          },\n          \"update\":{\n             \"method\":\"PATCH\",\n             \"url\":\"https://api.hypothes.is/api/profile\",\n             \"desc\":\"Update a user's preferences\"\n          }\n       },\n       \"user\":{\n          \"create\":{\n             \"method\":\"POST\",\n             \"url\":\"https://api.hypothes.is/api/users\",\n             \"desc\":\"Create a new user\"\n          },\n          \"read\":{\n             \"method\":\"GET\",\n             \"url\":\"https://api.hypothes.is/api/users/:userid\",\n             \"desc\":\"Fetch a user\"\n          },\n          \"update\":{\n             \"method\":\"PATCH\",\n             \"url\":\"https://api.hypothes.is/api/users/:username\",\n             \"desc\":\"Update a user\"\n          }\n       }\n    }\n }\n ;\n\n","\nimport * as express from \"express\";\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as util from 'util';\nimport * as cheerio from \"cheerio\";\n// export const RED = require(\"node-red\");\nimport * as http from 'http';\nimport {removeStopwords} from 'stopword';\nimport {Neo4jClient, testConnection} from './neo4j/client';\nimport {words} from './nlp';\nimport {ProgramRunner} from './program';\nimport {NodeDb} from './res';\nimport {Note} from '../../common/db';\n\nconst cors = require('cors');\nconst bodyParser = require('body-parser');\n\nconst nlp = require('compromise');\nnlp.extend(require('compromise-ngrams')) //done!\n\nexport async function startServer() {\n\n    const app = express();\n    const server = http.createServer(app);\n\n    const root = path.join(__dirname, '../../../../../');\n    const port = 34701;\n\n    app.use(cors());\n    app.use(express.static(root));\n    app.use(bodyParser.json());\n    app.use(bodyParser.urlencoded({\n        extended: false\n    }));\n\n    let neo4jRunning = false;\n    // const neo4jClient = new Neo4jClient();\n    //\n    // connection neo4j\n    // await neo4jClient.check();\n\n    // const programRunner = new ProgramRunner();\n    const db = new NodeDb(`${root}/res/src/common/db.json`);\n    await db.load();\n\n    app.get('/res', (req, res) => {\n        res.sendFile('index.html', {root: `${root}`});\n    });\n\n    app.get('/notebook', (req, res) => {\n        res.sendFile('/res/dist/notebook/index.html', {root: `${root}`});//\n    });\n\n    // google programmablesearchengine\n    app.get('/search', (req, res) => {\n        res.sendFile('/res/dist/search/index.html', {root: `${root}`});//\n    });\n\n    app.get('/search/gcse-a47d2a20d46db4877.html', (req, res) => {\n        res.sendFile('/res/dist/search/gcse-a47d2a20d46db4877.html', {root: `${root}`});//\n    });\n\n    app.get('/search/gcse-97c555b677d12465f.html', (req, res) => {\n        res.sendFile('/res/dist/search/gcse-97c555b677d12465f.html', {root: `${root}`});//\n    });\n\n    app.get('/search/gcse-a4690bf98adbc4c10.html', (req, res) => {\n        res.sendFile('/res/dist/search/gcse-a4690bf98adbc4c10.html', {root: `${root}`});//\n    });\n\n    const routes = {\n        reqlist: {\n            fn: () => {\n                return Object.getOwnPropertyNames(routes)\n                    .filter(prop => prop !== 'reqlist')\n                    .map(prop => {\n                        return {name: prop};\n                    });\n            }\n        },\n\n        neo4jHello: {\n            fn: async () => {\n                const result =  await testConnection();\n                return result !== undefined? 'connected' : 'cannot connect';\n            },\n        },\n\n        nlpVerbs: {\n            fn: async () => {\n                const text = await cleanText(path.join(root, '/res/res/thinking/A Rulebook for Arguments.18.html'));\n                return getVerbs(text);\n            }\n        },\n\n        // nlpNgrams: {\n        //     fn: async () => {\n        //         const text = await cleanText(path.join(root, '/res/res/thinking/A Rulebook for Arguments.18.html'));\n        //         const ngrams = nlp(text).ngrams({\n        //             size: 1\n        //         });\n        //\n        //         return ngrams;\n        //     }\n        // },\n        //\n        // nlpSentence: {\n        //     fn: async (sent: string) => {\n        //         return neo4jClient.addSent(words(sent));\n        //     }\n        // },\n        //\n        // notes: {\n        //     fn: async () => {\n        //         return neo4jClient.getNodeByLabel('EditorJSNote');\n        //     }\n        // },\n        //\n        // saveNote: {\n        //     fn: async (note: any) => {\n        //         return neo4jClient.saveNode(note);\n        //     }\n        // },\n        //\n        // deleteNote: {\n        //     fn: async (id: string) => {\n        //         return neo4jClient.deleteNode(id);\n        //     }\n        // },\n        //\n        // runGraph: {\n        //     fn: async (program: string) => {\n        //         return programRunner.run(program);\n        //     }\n        // },\n\n        resAnnUpdate: {\n            fn: async (url: string, note: string) => {\n                db.updateAnn(url, JSON.parse(note));\n                db.save();\n                return Promise.resolve();\n            }\n        },\n\n        resAnnAdd: {\n            fn: async (url: string, note: Note) => {\n                db.addAnnotation(url, note);\n                db.save();\n                return Promise.resolve();\n            }\n        },\n\n        resAnnAddTag: {\n            fn: async (url: string, id: string, tag: string) => {\n                db.updateAnnotationTag(url, id, tag);\n                db.save();\n                return Promise.resolve();\n            }\n        },\n\n        resAnnDelTag: {\n            fn: async (url: string, id: string, idx: number) => {\n                db.delAnnotationTag(url, id, idx);\n                db.save();\n                return Promise.resolve();\n            }\n        },\n\n        resAnnDel: {\n            fn: async (url: string, id: string) => {\n                db.delAnnotation(url, id);\n                db.save();\n                return Promise.resolve();\n            }\n        },\n\n        resAnnSave: {\n            fn: async () => {\n                db.save();\n                return Promise.resolve();\n            }\n        }\n    }\n\n    app.post('/res', async(req, res, next) => {\n        const body = req.body;\n        const method = body.method;\n\n        //@ts-ignore\n        const target = routes[method];\n        console.log(`request: ${method}, params: ${JSON.stringify(body.params)}`);\n\n        if (target !== undefined) {\n\n            if (!neo4jRunning && method.startsWith('neo4j')) {\n                res.send('neo4j is not running');\n                return;\n            }\n\n            const result = await target.fn(...body.params);\n            res.send(result);\n\n        } else {\n            next('error');\n        }\n    });\n\n    app.listen(port, () => {\n        console.log(`Example app listening on port ${port}`)\n    });\n}\n\nasync function cleanText(path: string): Promise<string> {\n\n    const readFile = util.promisify(fs.readFile);\n\n    return new Promise((resolve, reject) => {\n        readFile(path).then((data) => {\n            const $ = cheerio.load(data.toString());\n\n\n            const text: string = $('#OEBPS\\\\/prf\\\\.xhtml').text() as string;\n\n            // const text = 'a b c d it man asked for for it it it man man';\n\n            const result = removeStopwords(text.replace(/\\n/g, ' ').split(' ')).join(' ');\n            // const result = removeStopwords(text.replace(/\\n/g, ' ').split(' '))\n                // .map((word) => PorterStemmer.stem(word))\n                // .reduce((prev, curr) => `${prev} ${curr}`);\n\n            // do the clean\n\n            console.log(result);\n            resolve(result);\n\n        }).catch((error) => {\n            reject();\n        })\n    });\n\n}\n\nfunction getVerbs(text: string) {\n    return nlp(text).verbs().out('array');\n}\n","\nimport * as neo4j from 'neo4j-driver';\nimport { Driver } from 'neo4j-driver-core';\nimport {keys} from '../../../../.keys';\nimport {Sentence} from '../types';\nimport {Session, Transaction} from 'neo4j-driver';\nconst util = require('util');\n\nexport async function testConnection(): Promise<boolean> {\n    const uri = keys.neo4j.uri;\n    const user = keys.neo4j.user;\n    const pw = keys.neo4j.pw;\n\n    return new Neo4jClient(uri, user, pw).check();\n}\n\nexport class Neo4jClient {\n    private readonly driver: Driver;\n    private session: Session;\n\n    constructor(\n        private readonly uri?: string,\n        private readonly user?: string,\n        private readonly pw?: string\n    ) {\n\n        this.uri = this.uri || keys.neo4j.uri;\n        this.user = this.user || keys.neo4j.user;\n        this.pw = this.pw || keys.neo4j.pw;\n\n        console.log(`connect to: ${this.user}  ${this.uri}`);\n        this.driver = neo4j.driver(this.uri, neo4j.auth.basic(this.user, this.pw));\n        this.session = this.driver.session();\n\n    }\n\n    async dispose() {\n        await this.session.close();\n        await this.driver.close();\n    }\n\n    async check(): Promise<boolean> {\n        try {\n            await this.driver.verifyConnectivity()\n            console.log('Driver created')\n            return true;\n        } catch (error) {\n            console.log(`connectivity verification failed. ${error}`)\n            return false;\n        }\n    }\n\n    async getNodeByLabel(label: string): Promise<any> {\n        let nodes: any[] = [];\n        try {\n            const result = await this.session.run(\n            `MATCH (n: ${label}) RETURN n`,\n            );\n\n            nodes = result.records.map((value) => {\n                return {...value.get(0).properties}\n            })\n\n        } catch (e) {\n\n        }\n\n        return Promise.resolve(nodes);\n    }\n\n    async saveNode(note: any): Promise<any> {\n        const id = note.id;\n        if (id !== undefined) {\n            const n = {\n                id: id,\n                title: note.title,\n                content: JSON.stringify(note.content)\n            }\n\n            console.log(util.inspect(n));\n\n            try {\n                await this.session.run(\n                    `MERGE (n:EditorJSNote {id: \"${id}\"})\n                    ON CREATE\n                        SET n += ${util.inspect(n)}\n                    ON MATCH\n                        SET n += ${util.inspect(n)}\n                    RETURN n`,\n                );\n\n            } catch (e) {\n                console.log(e);\n                return Promise.resolve(e);\n            }\n        }\n\n        return Promise.resolve(id);\n    }\n\n    async deleteNode(id: string): Promise<any> {\n        try {\n            await this.session.run(\n                `MATCH (n:EditorJSNote {id: \"${id}\"})\n                    DELETE n`,\n            );\n\n        } catch (e) {\n            console.log(e);\n            return Promise.resolve(e);\n        }\n\n        return Promise.resolve(id);\n    }\n\n    async addSent(sent: Sentence): Promise<boolean> {\n        let success = true;\n        if (this.driver === undefined) {\n            console.log('not connected');\n            return Promise.resolve(false);\n        }\n\n        if (sent.words.length === 0) {\n            // nothing to add\n            return Promise.resolve(true);\n        }\n\n        let tx: Transaction;\n        try {\n            tx = this.session.beginTransaction();\n\n            let stmt = `MERGE(:Sentence{text: \"${sent.text}\", sha1: \"${sent.sha1}\"})`;\n\n            console.log(stmt);\n\n            tx.run(stmt);\n\n            if (sent.words.length == 1) {\n                tx.run(`MERGE(:Word{text: \"${sent.words[0]}\"})`);\n            } else {\n                sent.words.reduce((prev, curr) => {\n                    // two nodes\n                    tx.run(`\n                        MERGE(:Word{text: \"${prev}\"})\n                        MERGE(:Word{text: \"${curr}\"})\n                    `);\n\n                    // relationship between two nodes\n                    tx.run(`\n                    MATCH\n                        (a:Word{text: \"${prev}\"}),\n                        (b:Word{text: \"${curr}\"})\n                    MERGE (a)-[:SENTENCE_NEXT]->(b)\n                    `);\n\n                    // relationship between words and sentence\n                    tx.run(`\n                    MATCH\n                        (a:Word{text: \"${prev}\"}),\n                        (s:Sentence{sha1: \"${sent.sha1}\"})\n                    MERGE (a)-[:IN_SENTENCE]->(s)\n                    `);\n\n                    tx.run(`\n                    MATCH\n                        (a:Word{text: \"${curr}\"}),\n                        (s:Sentence{sha1: \"${sent.sha1}\"})\n                    MERGE (a)-[:IN_SENTENCE]->(s)\n                    `);\n\n                    return curr;\n                });\n            }\n\n            await tx.commit();\n\n            console.log('tx finished');\n\n        } catch (error ) {\n            console.log(error);\n            success = false;\n        }\n        finally {\n            if (tx !== undefined) {\n                await tx.close();\n            }\n        }\n\n        return Promise.resolve(success);\n    }\n}\n\n","import * as crypto from 'crypto';\nimport { Sentence } from '../types';\n\n/**\n * Split sentence to words\n *\n * @param sentence\n */\nexport function words(sentence: string): Sentence {\n\n    const sha1sum = crypto.createHash('sha1')\n    const hex = sha1sum.update(sentence).digest('hex');\n\n    const words = sentence.split(/[\\s\\.\\,\\;\\!\\-\\\"]+/)\n        .map((w) => w.toLowerCase())\n        .filter((w) => w.length>0)\n\n    return {\n        words: words,\n        text: sentence,\n        sha1: hex\n    }\n}\n","module.exports = require(\"body-parser\");","module.exports = require(\"cheerio\");","module.exports = require(\"compromise\");","module.exports = require(\"compromise-ngrams\");","module.exports = require(\"cors\");","module.exports = require(\"css\");","module.exports = require(\"express\");","module.exports = require(\"extract-zip\");","module.exports = require(\"got\");","module.exports = require(\"isomorphic-git\");","module.exports = require(\"jquery\");","module.exports = require(\"jsdom\");","module.exports = require(\"neo4j-driver\");","module.exports = require(\"stopword\");","module.exports = require(\"url\");","module.exports = require(\"yargs\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/node/index.ts\");\n",""],"names":[],"sourceRoot":""}